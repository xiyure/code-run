"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const y=require("../button/index.cjs"),V=require("../input/index.cjs");require("../input_number/index.cjs");require("../radio/index.cjs");require("../checkbox/index.cjs");require("../switch/index.cjs");require("../tab/index.cjs");require("../pagination/index.cjs");require("../select/index.cjs");require("../cascader/index.cjs");require("../date_picker/index.cjs");require("../upload/index.cjs");const M=require("../transfer/index.cjs");require("../operate/index.cjs");require("../tag/index.cjs");const j=require("../popover/index.cjs");require("../popconfirm/index.cjs");require("../result/index.cjs");require("../empty/index.cjs");require("../message/index.cjs");require("../message_box/index.cjs");require("../dialog/index.cjs");require("../dialog_service/index.cjs");require("../tooltip/index.cjs");require("../filter/index.cjs");require("../drawer/index.cjs");require("../form/index.cjs");require("../step/index.cjs");require("../collapse/index.cjs");require("../view/index.cjs");require("../badge/index.cjs");require("../timeline/index.cjs");require("../calendar/index.cjs");require("../tree/index.cjs");require("./index.cjs");const x=require("../dropdown/index.cjs");require("../tree_transfer/index.cjs");require("../tree_select/index.cjs");require("../filter_form/index.cjs");require("../button_container/index.cjs");const O=require("../slider_button/index.cjs");require("../script_input/index.cjs");require("../icon_popover/index.cjs");require("../global_provider/index.cjs");require("../split/index.cjs");require("../list/index.cjs");require("../text_v2/index.cjs");const R=require("../../hooks/use_locale.cjs"),S=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const E=require("./const.cjs"),Y=require("../../node_modules/ksw-vue-icon/es/icons/base/size-controls.cjs"),P=require("../../node_modules/ksw-vue-icon/es/icons/base/filter-fill.cjs"),U=require("../../node_modules/ksw-vue-icon/es/icons/base/filter.cjs"),A=require("../../node_modules/ksw-vue-icon/es/icons/base/reload.cjs"),N=require("../../node_modules/ksw-vue-icon/es/icons/base/search.cjs"),Z=require("../../node_modules/ksw-vue-icon/es/icons/base/setting.cjs"),e=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),t=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),u=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),G={key:0,class:"k-tree-table__header-pure"},J={key:0,class:"k-table-info"},Q={key:0},W=["title"],X={class:"k-table-func"},_={class:"text-sm"},ee={class:"text-sm"},te={key:2,class:"k-tree-table__header-extra"},re=e.defineComponent({name:"TableHeader",__name:"table_header",props:{currentMode:String,simple:Boolean,showHeaderTools:Boolean,showSearchInput:Boolean,showDescription:Boolean,showTotal:Boolean,dataLength:Number,widgets:Array,searchConfig:Object,filterConfig:Object,transferConfig:Object},emits:["update:current-mode","input-change","filter-confirm","filter-clear","filter-show","filter-hide","transfer-show","transfer-hide","transfer-change","transfer-drag","size-change","refresh","switch-change"],setup(r,{expose:$,emit:F}){const b=e.inject(E.TABLE_SIZE_KEY,e.computed(()=>{})),{t:s}=R.useLocale(),I=r,i=F,T=[{label:"卡片",name:"card"},{label:"列表",name:"list"}],p={width:"80px"},v=t.ref(),w=t.ref(),d=t.ref(""),z=e.computed(()=>b.value==="small"||b.value==="mini"?{...p,height:"1.5rem",fontSize:"12px"}:{...p,height:"2rem",fontSize:"14px"});function D(a){i("input-change",a)}function K(){d.value=""}return $({filterRef:v,transferRef:w,clearInput:K}),(a,o)=>{const H=e.resolveComponent("k-filter"),C=e.resolveDirective("ksw_tooltip");return e.openBlock(),e.createElementBlock(e.Fragment,null,[r.simple&&r.showSearchInput?(e.openBlock(),e.createElementBlock("div",G,[e.createVNode(t.unref(V.KInput),{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=n=>d.value=n),"suffix-icon":t.unref(N.default),placeholder:r.searchConfig.placeholder,clearable:"",onChange:D},null,8,["modelValue","suffix-icon","placeholder"])])):r.showHeaderTools&&!r.simple?(e.openBlock(),e.createElementBlock("div",{key:1,class:"k-tree-table__header",style:u.normalizeStyle({justifyContent:r.showDescription?"space-between":"flex-end"})},[I.showDescription?(e.openBlock(),e.createElementBlock("div",J,[e.renderSlot(a.$slots,"description",{total:r.dataLength,conditionInfo:r.filterConfig.conditionInfo},()=>{var n,m,k,g,h,B,q;return[r.showTotal?(e.openBlock(),e.createElementBlock("span",Q,u.toDisplayString((n=t.unref(s))==null?void 0:n("table.total"))+" "+u.toDisplayString(r.dataLength)+" "+u.toDisplayString((m=t.unref(s))==null?void 0:m("table.data")),1)):e.createCommentVNode("",!0),e.createElementVNode("span",{title:r.filterConfig.text,class:"condition-info"},u.toDisplayString(r.filterConfig.text),9,W),(g=(k=r.filterConfig.conditionInfo)==null?void 0:k.conditionList)!=null&&g.length&&((B=(h=v.value)==null?void 0:h[0])!=null&&B.clearFilter)?(e.openBlock(),e.createElementBlock("span",{key:1,class:"filter-reset",onClick:o[1]||(o[1]=()=>{i("filter-clear")})}," · "+u.toDisplayString((q=t.unref(s))==null?void 0:q("table.reset")),1)):e.createCommentVNode("",!0)]})])):e.createCommentVNode("",!0),e.createElementVNode("div",X,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.widgets,n=>{var m,k,g,h,B,q;return e.openBlock(),e.createElementBlock(e.Fragment,{key:n.id},[n.slot&&a.$slots[n.slot]?e.renderSlot(a.$slots,n.slot,{key:0}):n.id==="search"?(e.openBlock(),e.createBlock(t.unref(V.KInput),{key:1,modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=l=>d.value=l),"suffix-icon":t.unref(N.default),placeholder:r.searchConfig.placeholder,clearable:"",onChange:D},null,8,["modelValue","suffix-icon","placeholder"])):n.id==="refresh"?e.withDirectives((e.openBlock(),e.createBlock(t.unref(y.KButton),{key:2,class:"k-tree-table__header-btn",onClick:o[3]||(o[3]=()=>{i("refresh")})},{default:e.withCtx(()=>[e.createVNode(t.unref(A.default))]),_:1})),[[C,(m=t.unref(s))==null?void 0:m("table.refresh")]]):n.id==="filter"?(e.openBlock(),e.createBlock(H,{key:3,ref_for:!0,ref_key:"filterRef",ref:v,data:r.filterConfig.data,options:r.filterConfig.columns,"children-field":"group","filter-key":"field",remote:((k=r.filterConfig)==null?void 0:k.remote)??!1,"ignore-case":(g=r.filterConfig)==null?void 0:g.ignoreCase,"date-format":((h=r.filterConfig)==null?void 0:h.dateFormat)??"YYYY-MM-DD HH:mm:ss","time-format":((B=r.filterConfig)==null?void 0:B.timeFormat)??"HH:mm:ss","default-condition":((q=r.filterConfig)==null?void 0:q.defaultCondition)??r.filterConfig.conditionInfo,onConfirm:o[4]||(o[4]=(l,c)=>{i("filter-confirm",l,c)}),onClear:o[5]||(o[5]=()=>{i("filter-clear")}),onShow:o[6]||(o[6]=()=>{i("filter-show")}),onHide:o[7]||(o[7]=()=>{i("filter-hide")})},{reference:e.withCtx(({hasConfigCondition:l})=>{var c;return[e.withDirectives((e.openBlock(),e.createElementBlock("div",null,[n.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof n.widget=="function"?n.widget():n.widget),{key:0})):e.renderSlot(a.$slots,t.unref(S.compatibleSlots)(a.$slots,["filter-trigger","filterTrigger"]),{key:1,isFilter:l},()=>[e.createVNode(t.unref(y.KButton),{class:"k-tree-table__header-btn"},{default:e.withCtx(()=>[l?(e.openBlock(),e.createBlock(t.unref(P.default),{key:1,color:"#2882FF"})):(e.openBlock(),e.createBlock(t.unref(U.default),{key:0}))]),_:2},1024)])])),[[C,(c=t.unref(s))==null?void 0:c("table.advancedFilter_c")]])]}),_:2},1032,["data","options","remote","ignore-case","date-format","time-format","default-condition"])):n.id==="card-switch"?(e.openBlock(),e.createBlock(t.unref(O.KSliderButton),{key:4,class:"k-tree-table__slider-button","default-active":r.currentMode,style:u.normalizeStyle(z.value),items:T,onChange:o[8]||(o[8]=l=>{i("update:current-mode",l),i("switch-change",l)})},null,8,["default-active","style"])):n.id==="size-control"&&r.currentMode==="list"?(e.openBlock(),e.createBlock(t.unref(x.KDropdown),{key:5,trigger:"click",onCommand:o[9]||(o[9]=l=>{i("size-change",l)})},{title:e.withCtx(()=>{var l;return[e.withDirectives((e.openBlock(),e.createElementBlock("div",_,[n.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof n.widget=="function"?n.widget():n.widget),{key:0})):e.renderSlot(a.$slots,t.unref(S.compatibleSlots)(a.$slots,["size-control-trigger","sizeControlTrigger"]),{key:1},()=>[e.createVNode(t.unref(y.KButton),{class:"k-tree-table__header-btn"},{default:e.withCtx(()=>[e.createVNode(t.unref(Y.default))]),_:1})])])),[[C,(l=t.unref(s))==null?void 0:l("table.sizeControlTrigger")]])]}),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.unref(E.SIZE_OPTIONS),l=>(e.openBlock(),e.createBlock(t.unref(x.KDropdownItem),{key:l.value,style:u.normalizeStyle({color:t.unref(b)===(l.value||void 0)?"#2882FF":""}),command:l.value},{default:e.withCtx(()=>[e.createTextVNode(u.toDisplayString(l.label),1)]),_:2},1032,["style","command"]))),128))]),_:2},1024)):n.id==="transfer"&&r.currentMode==="list"?(e.openBlock(),e.createBlock(t.unref(j.KPopover),{key:6,trigger:"click",width:"auto",teleported:!1,onShow:o[14]||(o[14]=()=>{i("transfer-show")}),onHide:o[15]||(o[15]=()=>{i("transfer-hide")})},{reference:e.withCtx(()=>{var l;return[e.withDirectives((e.openBlock(),e.createElementBlock("div",ee,[n.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof n.widget=="function"?n.widget():n.widget),{key:0})):e.renderSlot(a.$slots,t.unref(S.compatibleSlots)(a.$slots,["transfer-trigger","transferTrigger"]),{key:1},()=>[e.createVNode(t.unref(y.KButton),{class:"k-tree-table__header-btn"},{default:e.withCtx(()=>[e.createVNode(t.unref(Z.default))]),_:1})])])),[[C,(l=t.unref(s))==null?void 0:l("table.columnHeaderController")]])]}),default:e.withCtx(()=>{var l,c;return[e.createVNode(t.unref(M.KTransfer),{ref_for:!0,ref_key:"transferRef",ref:w,modelValue:r.transferConfig.selectData,"onUpdate:modelValue":o[10]||(o[10]=f=>r.transferConfig.selectData=f),data:r.transferConfig.originData,"default-keys":r.transferConfig.defaultHeader,format:{noChecked:" ",hasChecked:" "},titles:[(l=t.unref(s))==null?void 0:l("table.unselected"),(c=t.unref(s))==null?void 0:c("table.selected")],drag:r.transferConfig.drag,filterable:r.transferConfig.showSearch,onChange:o[11]||(o[11]=(...f)=>{i("transfer-change",...f)}),onReset:o[12]||(o[12]=f=>{}),onDrag:o[13]||(o[13]=f=>{i("transfer-drag",f)})},null,8,["modelValue","data","default-keys","titles","drag","filterable"])]}),_:2},1024)):n.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof n.widget=="function"?n.widget():n.widget),{key:7})):e.createCommentVNode("",!0)],64)}),128))])],4)):e.createCommentVNode("",!0),a.$slots["header-extra"]?(e.openBlock(),e.createElementBlock("div",te,[e.renderSlot(a.$slots,"header-extra")])):e.createCommentVNode("",!0)],64)}}});exports.default=re;
