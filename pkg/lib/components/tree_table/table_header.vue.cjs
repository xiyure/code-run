"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),C=require("../button/index.cjs"),w=require("../input/index.cjs");require("../input_number/index.cjs");require("../radio/index.cjs");require("../checkbox/index.cjs");require("../switch/index.cjs");require("../tab/index.cjs");require("../pagination/index.cjs");require("../select/index.cjs");require("../cascader/index.cjs");require("../date_picker/index.cjs");require("../upload/index.cjs");const K=require("../transfer/index.cjs");require("../operate/index.cjs");require("../tag/index.cjs");const H=require("../popover/index.cjs");require("../popconfirm/index.cjs");require("../result/index.cjs");require("../empty/index.cjs");require("../message/index.cjs");require("../message_box/index.cjs");require("../dialog/index.cjs");require("../dialog_service/index.cjs");require("../tooltip/index.cjs");require("../filter/index.cjs");require("../drawer/index.cjs");require("../form/index.cjs");require("../step/index.cjs");require("../collapse/index.cjs");require("../view/index.cjs");require("../badge/index.cjs");require("../timeline/index.cjs");require("../calendar/index.cjs");require("../tree/index.cjs");require("./index.cjs");const D=require("../dropdown/index.cjs");require("../tree_transfer/index.cjs");require("../tree_select/index.cjs");require("../filter_form/index.cjs");require("../button_container/index.cjs");const L=require("../slider_button/index.cjs");require("../script_input/index.cjs");require("../icon_popover/index.cjs");require("../global_provider/index.cjs");require("../split/index.cjs");require("../list/index.cjs");require("../text_v2/index.cjs");const M=require("../../hooks/use_locale.cjs"),b=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const V=require("./const.cjs"),j=require("../../node_modules/ksw-vue-icon/es/icons/base/size-controls.cjs"),O=require("../../node_modules/ksw-vue-icon/es/icons/base/filter-fill.cjs"),R=require("../../node_modules/ksw-vue-icon/es/icons/base/filter.cjs"),Y=require("../../node_modules/ksw-vue-icon/es/icons/base/reload.cjs"),x=require("../../node_modules/ksw-vue-icon/es/icons/base/search.cjs"),P=require("../../node_modules/ksw-vue-icon/es/icons/base/setting.cjs"),U={key:0,class:"k-tree-table__header-pure"},A={key:0,class:"k-table-info"},Z={key:0},G=["title"],J={class:"k-table-func"},Q={class:"text-sm"},W={class:"text-sm"},X={key:2,class:"k-tree-table__header-extra"},_=e.defineComponent({name:"TableHeader",__name:"table_header",props:{currentMode:String,simple:Boolean,showHeaderTools:Boolean,showSearchInput:Boolean,showDescription:Boolean,showTotal:Boolean,dataLength:Number,widgets:Array,searchConfig:Object,filterConfig:Object,transferConfig:Object},emits:["update:current-mode","input-change","filter-confirm","filter-clear","filter-show","filter-hide","transfer-show","transfer-hide","transfer-change","transfer-drag","size-change","refresh","switch-change"],setup(t,{expose:E,emit:N}){const q=e.inject(V.TABLE_SIZE_KEY,e.computed(()=>{})),{t:a}=M.useLocale(),$=t,l=N,F=[{label:"卡片",name:"card"},{label:"列表",name:"list"}],v={width:"80px"},y=e.ref(),S=e.ref(),f=e.ref(""),I=e.computed(()=>q.value==="small"||q.value==="mini"?{...v,height:"1.5rem",fontSize:"12px"}:{...v,height:"2rem",fontSize:"14px"});function p(i){l("input-change",i)}function T(){f.value=""}return E({filterRef:y,transferRef:S,clearInput:T}),(i,r)=>{const z=e.resolveComponent("k-filter"),B=e.resolveDirective("ksw_tooltip");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.simple&&t.showSearchInput?(e.openBlock(),e.createElementBlock("div",U,[e.createVNode(e.unref(w.KInput),{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=o=>f.value=o),"suffix-icon":e.unref(x.default),placeholder:t.searchConfig.placeholder,clearable:"",onChange:p},null,8,["modelValue","suffix-icon","placeholder"])])):t.showHeaderTools&&!t.simple?(e.openBlock(),e.createElementBlock("div",{key:1,class:"k-tree-table__header",style:e.normalizeStyle({justifyContent:t.showDescription?"space-between":"flex-end"})},[$.showDescription?(e.openBlock(),e.createElementBlock("div",A,[e.renderSlot(i.$slots,"description",{total:t.dataLength,conditionInfo:t.filterConfig.conditionInfo},()=>{var o,c,d,m,k,g,h;return[t.showTotal?(e.openBlock(),e.createElementBlock("span",Z,e.toDisplayString((o=e.unref(a))==null?void 0:o("table.total"))+" "+e.toDisplayString(t.dataLength)+" "+e.toDisplayString((c=e.unref(a))==null?void 0:c("table.data")),1)):e.createCommentVNode("",!0),e.createElementVNode("span",{title:t.filterConfig.text,class:"condition-info"},e.toDisplayString(t.filterConfig.text),9,G),(m=(d=t.filterConfig.conditionInfo)==null?void 0:d.conditionList)!=null&&m.length&&((g=(k=y.value)==null?void 0:k[0])!=null&&g.clearFilter)?(e.openBlock(),e.createElementBlock("span",{key:1,class:"filter-reset",onClick:r[1]||(r[1]=()=>{l("filter-clear")})}," · "+e.toDisplayString((h=e.unref(a))==null?void 0:h("table.reset")),1)):e.createCommentVNode("",!0)]})])):e.createCommentVNode("",!0),e.createElementVNode("div",J,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.widgets,o=>{var c,d,m,k,g,h;return e.openBlock(),e.createElementBlock(e.Fragment,{key:o.id},[o.slot&&i.$slots[o.slot]?e.renderSlot(i.$slots,o.slot,{key:0}):o.id==="search"?(e.openBlock(),e.createBlock(e.unref(w.KInput),{key:1,modelValue:f.value,"onUpdate:modelValue":r[2]||(r[2]=n=>f.value=n),"suffix-icon":e.unref(x.default),placeholder:t.searchConfig.placeholder,clearable:"",onChange:p},null,8,["modelValue","suffix-icon","placeholder"])):o.id==="refresh"?e.withDirectives((e.openBlock(),e.createBlock(e.unref(C.KButton),{key:2,class:"k-tree-table__header-btn",onClick:r[3]||(r[3]=()=>{l("refresh")})},{default:e.withCtx(()=>[e.createVNode(e.unref(Y.default))]),_:1})),[[B,(c=e.unref(a))==null?void 0:c("table.refresh")]]):o.id==="filter"?(e.openBlock(),e.createBlock(z,{key:3,ref_for:!0,ref_key:"filterRef",ref:y,data:t.filterConfig.data,options:t.filterConfig.columns,"children-field":"group","filter-key":"field",remote:((d=t.filterConfig)==null?void 0:d.remote)??!1,"ignore-case":(m=t.filterConfig)==null?void 0:m.ignoreCase,"date-format":((k=t.filterConfig)==null?void 0:k.dateFormat)??"YYYY-MM-DD HH:mm:ss","time-format":((g=t.filterConfig)==null?void 0:g.timeFormat)??"HH:mm:ss","default-condition":((h=t.filterConfig)==null?void 0:h.defaultCondition)??t.filterConfig.conditionInfo,onConfirm:r[4]||(r[4]=(n,s)=>{l("filter-confirm",n,s)}),onClear:r[5]||(r[5]=()=>{l("filter-clear")}),onShow:r[6]||(r[6]=()=>{l("filter-show")}),onHide:r[7]||(r[7]=()=>{l("filter-hide")})},{reference:e.withCtx(({hasConfigCondition:n})=>{var s;return[e.withDirectives((e.openBlock(),e.createElementBlock("div",null,[o.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof o.widget=="function"?o.widget():o.widget),{key:0})):e.renderSlot(i.$slots,e.unref(b.compatibleSlots)(i.$slots,["filter-trigger","filterTrigger"]),{key:1,isFilter:n},()=>[e.createVNode(e.unref(C.KButton),{class:"k-tree-table__header-btn"},{default:e.withCtx(()=>[n?(e.openBlock(),e.createBlock(e.unref(O.default),{key:1,color:"#2882FF"})):(e.openBlock(),e.createBlock(e.unref(R.default),{key:0}))]),_:2},1024)])])),[[B,(s=e.unref(a))==null?void 0:s("table.advancedFilter_c")]])]}),_:2},1032,["data","options","remote","ignore-case","date-format","time-format","default-condition"])):o.id==="card-switch"?(e.openBlock(),e.createBlock(e.unref(L.KSliderButton),{key:4,class:"k-tree-table__slider-button","default-active":t.currentMode,style:e.normalizeStyle(I.value),items:F,onChange:r[8]||(r[8]=n=>{l("update:current-mode",n),l("switch-change",n)})},null,8,["default-active","style"])):o.id==="size-control"&&t.currentMode==="list"?(e.openBlock(),e.createBlock(e.unref(D.KDropdown),{key:5,trigger:"click",onCommand:r[9]||(r[9]=n=>{l("size-change",n)})},{title:e.withCtx(()=>{var n;return[e.withDirectives((e.openBlock(),e.createElementBlock("div",Q,[o.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof o.widget=="function"?o.widget():o.widget),{key:0})):e.renderSlot(i.$slots,e.unref(b.compatibleSlots)(i.$slots,["size-control-trigger","sizeControlTrigger"]),{key:1},()=>[e.createVNode(e.unref(C.KButton),{class:"k-tree-table__header-btn"},{default:e.withCtx(()=>[e.createVNode(e.unref(j.default))]),_:1})])])),[[B,(n=e.unref(a))==null?void 0:n("table.sizeControlTrigger")]])]}),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(V.SIZE_OPTIONS),n=>(e.openBlock(),e.createBlock(e.unref(D.KDropdownItem),{key:n.value,style:e.normalizeStyle({color:e.unref(q)===(n.value||void 0)?"#2882FF":""}),command:n.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.label),1)]),_:2},1032,["style","command"]))),128))]),_:2},1024)):o.id==="transfer"&&t.currentMode==="list"?(e.openBlock(),e.createBlock(e.unref(H.KPopover),{key:6,trigger:"click",width:"auto",teleported:!1,onShow:r[14]||(r[14]=()=>{l("transfer-show")}),onHide:r[15]||(r[15]=()=>{l("transfer-hide")})},{reference:e.withCtx(()=>{var n;return[e.withDirectives((e.openBlock(),e.createElementBlock("div",W,[o.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof o.widget=="function"?o.widget():o.widget),{key:0})):e.renderSlot(i.$slots,e.unref(b.compatibleSlots)(i.$slots,["transfer-trigger","transferTrigger"]),{key:1},()=>[e.createVNode(e.unref(C.KButton),{class:"k-tree-table__header-btn"},{default:e.withCtx(()=>[e.createVNode(e.unref(P.default))]),_:1})])])),[[B,(n=e.unref(a))==null?void 0:n("table.columnHeaderController")]])]}),default:e.withCtx(()=>{var n,s;return[e.createVNode(e.unref(K.KTransfer),{ref_for:!0,ref_key:"transferRef",ref:S,modelValue:t.transferConfig.selectData,"onUpdate:modelValue":r[10]||(r[10]=u=>t.transferConfig.selectData=u),data:t.transferConfig.originData,"default-keys":t.transferConfig.defaultHeader,format:{noChecked:" ",hasChecked:" "},titles:[(n=e.unref(a))==null?void 0:n("table.unselected"),(s=e.unref(a))==null?void 0:s("table.selected")],drag:t.transferConfig.drag,filterable:t.transferConfig.showSearch,onChange:r[11]||(r[11]=(...u)=>{l("transfer-change",...u)}),onReset:r[12]||(r[12]=u=>{}),onDrag:r[13]||(r[13]=u=>{l("transfer-drag",u)})},null,8,["modelValue","data","default-keys","titles","drag","filterable"])]}),_:2},1024)):o.widget?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(typeof o.widget=="function"?o.widget():o.widget),{key:7})):e.createCommentVNode("",!0)],64)}),128))])],4)):e.createCommentVNode("",!0),i.$slots["header-extra"]?(e.openBlock(),e.createElementBlock("div",X,[e.renderSlot(i.$slots,"header-extra")])):e.createCommentVNode("",!0)],64)}}});exports.default=_;
