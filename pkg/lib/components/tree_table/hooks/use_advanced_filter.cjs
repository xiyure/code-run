"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const $=require("../../../hooks/use_locale.cjs"),a=require("../../../utils/utils.cjs");require("../../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../../node_modules/culori/src/index.cjs");const w=require("../../../node_modules/lodash-es/cloneDeep.cjs"),v=require("../../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),g=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs");function T(F,l,h){const{t:e}=$.useLocale(),s=v.ref([]),c=v.ref(),q=g.computed(()=>{var i,o;let n="";if((o=(i=c.value)==null?void 0:i.conditionList)!=null&&o.length){const{filterRule:u}=c.value;n+=u===0?e==null?void 0:e("filter.anyOne"):e==null?void 0:e("filter.all"),c.value.conditionList.forEach((r,t)=>{const d=l.useTree&&t===0?"":"·";n+=`  ${d} ${r.title} ${e==null?void 0:e(`filter.${r.logic}`)} ${r.showValue}`})}else{const u=l.useTree?"":"· ";n+=`${u}${e==null?void 0:e("table.showAll")}`}return n}),A=g.computed(()=>{const{filterColumns:n,filterAll:i,exclude:o=[],remote:u}=l.advancedFilterConfig??{},r=a.getValidTreeData(w.default(h.value),"group",t=>!t.type&&t.title&&t.field&&(i!==!1||t.visible!==!1)&&!o.includes(t.field));if(n){const{data:t,rest:d=[]}=a.resetTreeData(r,n,"group","field");return u===!0&&t.push(...d),t}return r});function C(){typeof l.onAdvancedFilterShow=="function"&&l.onAdvancedFilterShow()}function y(){if(typeof l.onAdvancedFilterHide=="function"){const n=f(),i=s.value;l.onAdvancedFilterHide({conditionInfo:n,filterData:i})}}function f(){var n,i,o;return(o=(i=(n=F.value)==null?void 0:n.filterRef)==null?void 0:i[0])==null?void 0:o.getConditionInfo()}return{newFilterData:s,filterConditionInfo:c,headerText:q,filterColumns:A,advancedFilterHide:y,advancedFilterShow:C,getAdvancedCondition:f}}exports.useAdvancedFilter=T;
