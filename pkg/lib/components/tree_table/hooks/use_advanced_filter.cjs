"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const d=require("vue"),$=require("../../../hooks/use_locale.cjs"),v=require("../../../utils/utils.cjs");require("../../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../../node_modules/culori/src/index.cjs");const w=require("../../../node_modules/lodash-es/cloneDeep.cjs");function y(g,l,F){const{t:e}=$.useLocale(),a=d.ref([]),c=d.ref(),h=d.computed(()=>{var i,o;let n="";if((o=(i=c.value)==null?void 0:i.conditionList)!=null&&o.length){const{filterRule:u}=c.value;n+=u===0?e==null?void 0:e("filter.anyOne"):e==null?void 0:e("filter.all"),c.value.conditionList.forEach((r,t)=>{const f=l.useTree&&t===0?"":"·";n+=`  ${f} ${r.title} ${e==null?void 0:e(`filter.${r.logic}`)} ${r.showValue}`})}else{const u=l.useTree?"":"· ";n+=`${u}${e==null?void 0:e("table.showAll")}`}return n}),A=d.computed(()=>{const{filterColumns:n,filterAll:i,exclude:o=[],remote:u}=l.advancedFilterConfig??{},r=v.getValidTreeData(w.default(F.value),"group",t=>!t.type&&t.title&&t.field&&(i!==!1||t.visible!==!1)&&!o.includes(t.field));if(n){const{data:t,rest:f=[]}=v.resetTreeData(r,n,"group","field");return u===!0&&t.push(...f),t}return r});function C(){typeof l.onAdvancedFilterShow=="function"&&l.onAdvancedFilterShow()}function q(){if(typeof l.onAdvancedFilterHide=="function"){const n=s(),i=a.value;l.onAdvancedFilterHide({conditionInfo:n,filterData:i})}}function s(){var n,i,o;return(o=(i=(n=g.value)==null?void 0:n.filterRef)==null?void 0:i[0])==null?void 0:o.getConditionInfo()}return{newFilterData:a,filterConditionInfo:c,headerText:h,filterColumns:A,advancedFilterHide:q,advancedFilterShow:C,getAdvancedCondition:s}}exports.useAdvancedFilter=y;
