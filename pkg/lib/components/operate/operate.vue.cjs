"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const _=require("../dropdown/index.cjs"),v=require("../../hooks/use_locale.cjs"),y=require("../../node_modules/ksw-vue-icon/es/icons/base/close.cjs"),C=require("../../node_modules/ksw-vue-icon/es/icons/base/ellipsis-horizontal.cjs"),e=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),a=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),c=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),N={key:0,class:"k-operate"},g={key:0,class:"k-operate__header"},V={class:"k-operate__content"},b={class:"k-operate__list"},E={class:"list-header"},w=["onClick"],D={class:"k-operate-list__label"},q={key:0,class:"k-operate-rest"},S={class:"el-dropdown-link"},M={class:"k-operate__close"},x=e.defineComponent({name:"KOperate",__name:"operate",props:{data:{default:()=>[]},max:{default:5},total:{default:0},hideOnClick:{type:Boolean,default:!0},checkMethod:{},showTotal:{type:Boolean,default:!0}},emits:["close"],setup(k,{emit:p}){const{t:h}=v.useLocale(),o=k,n=a.ref([]),i=a.ref([]);e.watch(()=>[o.data,o.max],()=>{var r;if(!Array.isArray(o.data)){i.value=[],n.value=[];return}const{max:t}=o;((r=o.data)==null?void 0:r.length)>t?(i.value=o.data.slice(0,t),n.value=o.data.slice(t)):(i.value=o.data,n.value=[])},{immediate:!0,deep:!0});const m=p;function u(t){const{disabled:r,handler:s}=t;if(!r&&typeof s=="function"){const l=typeof o.checkMethod=="function"?o.checkMethod(t):[];s({data:l})}}function f(){m("close")}return(t,r)=>{var s;return Number.isInteger(t.total)&&t.total>0?(e.openBlock(),e.createElementBlock("div",N,[t.showTotal?(e.openBlock(),e.createElementBlock("span",g,c.toDisplayString(t.total||"-"),1)):e.createCommentVNode("",!0),e.createElementVNode("div",V,[e.createElementVNode("ul",b,[e.createElementVNode("li",E,c.toDisplayString((s=a.unref(h))==null?void 0:s("operate.title"))+":",1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(l,d)=>(e.openBlock(),e.createElementBlock("li",{key:d,class:c.normalizeClass(["k-operate-list__item",{"k-operate-list__item--disabled":l.disabled}]),onClick:B=>u(l)},[e.createElementVNode("span",D,c.toDisplayString(l.label),1)],10,w))),128)),n.value.length?(e.openBlock(),e.createElementBlock("li",q,[e.createVNode(a.unref(_.KDropdown),{trigger:"click","hide-on-click":t.hideOnClick},{title:e.withCtx(()=>[e.createElementVNode("span",S,[e.createVNode(a.unref(C.default),{color:"#2882FF"})])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(l,d)=>(e.openBlock(),e.createBlock(a.unref(_.KDropdownItem),{key:d,disabled:l.disabled,class:"k-dropdown-item__content",onClick:B=>u(l)},{default:e.withCtx(()=>[e.createTextVNode(c.toDisplayString(l.label),1)]),_:2},1032,["disabled","onClick"]))),128))]),_:1},8,["hide-on-click"])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",M,[e.createVNode(a.unref(y.default),{onClick:f})])])])):e.createCommentVNode("",!0)}}});exports.default=x;
