"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),d=require("../dropdown/index.cjs"),f=require("../../hooks/use_locale.cjs"),v=require("../../node_modules/ksw-vue-icon/es/icons/base/close.cjs"),y=require("../../node_modules/ksw-vue-icon/es/icons/base/ellipsis-horizontal.cjs"),B={key:0,class:"k-operate"},C={key:0,class:"k-operate__header"},N={class:"k-operate__content"},g={class:"k-operate__list"},V={class:"list-header"},b=["onClick"],E={class:"k-operate-list__label"},w={key:0,class:"k-operate-rest"},D={class:"el-dropdown-link"},S={class:"k-operate__close"},q=e.defineComponent({name:"KOperate",__name:"operate",props:{data:{default:()=>[]},max:{default:5},total:{default:0},hideOnClick:{type:Boolean,default:!0},checkMethod:{},showTotal:{type:Boolean,default:!0}},emits:["close"],setup(u,{emit:k}){const{t:p}=f.useLocale(),o=u,l=e.ref([]),c=e.ref([]);e.watch(()=>[o.data,o.max],()=>{var n;if(!Array.isArray(o.data)){c.value=[],l.value=[];return}const{max:t}=o;((n=o.data)==null?void 0:n.length)>t?(c.value=o.data.slice(0,t),l.value=o.data.slice(t)):(c.value=o.data,l.value=[])},{immediate:!0,deep:!0});const _=k;function i(t){const{disabled:n,handler:r}=t;if(!n&&typeof r=="function"){const a=typeof o.checkMethod=="function"?o.checkMethod(t):[];r({data:a})}}function h(){_("close")}return(t,n)=>{var r;return Number.isInteger(t.total)&&t.total>0?(e.openBlock(),e.createElementBlock("div",B,[t.showTotal?(e.openBlock(),e.createElementBlock("span",C,e.toDisplayString(t.total||"-"),1)):e.createCommentVNode("",!0),e.createElementVNode("div",N,[e.createElementVNode("ul",g,[e.createElementVNode("li",V,e.toDisplayString((r=e.unref(p))==null?void 0:r("operate.title"))+":",1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,(a,s)=>(e.openBlock(),e.createElementBlock("li",{key:s,class:e.normalizeClass(["k-operate-list__item",{"k-operate-list__item--disabled":a.disabled}]),onClick:m=>i(a)},[e.createElementVNode("span",E,e.toDisplayString(a.label),1)],10,b))),128)),l.value.length?(e.openBlock(),e.createElementBlock("li",w,[e.createVNode(e.unref(d.KDropdown),{trigger:"click","hide-on-click":t.hideOnClick},{title:e.withCtx(()=>[e.createElementVNode("span",D,[e.createVNode(e.unref(y.default),{color:"#2882FF"})])]),default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(a,s)=>(e.openBlock(),e.createBlock(e.unref(d.KDropdownItem),{key:s,disabled:a.disabled,class:"k-dropdown-item__content",onClick:m=>i(a)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.label),1)]),_:2},1032,["disabled","onClick"]))),128))]),_:1},8,["hide-on-click"])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",S,[e.createVNode(e.unref(v.default),{onClick:h})])])])):e.createCommentVNode("",!0)}}});exports.default=q;
