"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const C=require("../../hooks/use_deprecated.cjs"),$=require("../../hooks/use_inherit_slot.cjs"),F=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const g=require("../../utils/dom.cjs"),l=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),N=require("../../node_modules/ksw-vue-icon/es/icons/base/window-min.cjs"),v=require("../../node_modules/ksw-vue-icon/es/icons/base/close.cjs"),S=require("../../node_modules/ksw-vue-icon/es/icons/base/window-max.cjs"),E=require("../../node_modules/ksw-vue-icon/es/icons/base/window-maximize.cjs"),R=require("../../node_modules/ksw-vue-icon/es/icons/base/window-reduce.cjs"),M=require("../../node_modules/element-plus/es/components/dialog/index.cjs"),T=require("../../node_modules/element-plus/es/components/card/index.cjs"),a=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),p=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),x={key:0,class:"k-dialog__resizable-header"},D={class:"k-dialog__title"},H={class:"k-dialog__resizable-handler"},P={class:"k-dialog-minimization__content"},O={class:"k-dialog__card-title"},W=l.defineComponent({name:"KDialog",__name:"dialog",props:l.mergeModels({modelValue:{type:Boolean,default:!1},title:{default:""},fullscreen:{type:Boolean,default:!1},minHeight:{default:150},minWidth:{default:300},useResizable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},autoFocusFirst:{type:Boolean,default:!1},autoFocusTo:{},resizable:{type:Boolean,default:!1},showResizeHandles:{type:Boolean,default:!0}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:l.mergeModels(["opened"],["update:modelValue"]),setup(h,{expose:k,emit:y}){const f=a.ref(),o=h;C.useDeprecated({scope:"k-dialog",from:"useResizable",replacement:"resizable",version:"2.0.0"},l.computed(()=>!!o.useResizable));const _=y,w=$.useInheritSlot(["header"]),d=l.useModel(h,"modelValue"),m={w:0,h:0},n=a.ref(o.fullscreen),c=a.ref(!1),u=l.computed(()=>o.resizable??o.useResizable);l.watch(()=>o.fullscreen,e=>{n.value=e}),l.watch(()=>o.modelValue,e=>{e&&(c.value=!1)});function z(){var t,i;const e=(i=(t=f.value)==null?void 0:t.dialogContentRef)==null?void 0:i.$el;if(e){if(n.value)e.style.width=`${m.w}px`,e.style.height=`${m.h}px`;else{const{width:r,height:s}=e.getBoundingClientRect();m.w=r,m.h=s,e.style.width="auto",e.style.height="100%"}c.value=!1,n.value=!n.value}}function V(){c.value=!0,d.value=!1}function b(){(o.autoFocusTo||o.autoFocusFirst)&&B(),_("opened")}function B(){var t,i,r;let e=null;if(typeof o.autoFocusTo=="string")e=g.getElement(o.autoFocusTo);else{const s=o.autoFocusTo;e=(s==null?void 0:s.$el)??s}if(e&&g.isInputElement(e)){(t=e.focus)==null||t.call(e);return}if(e=e?g.getElement("input, textarea",e):null,!e&&o.autoFocusFirst){const s=(r=(i=f.value)==null?void 0:i.dialogContentRef)==null?void 0:r.$el;e=g.getElement(".el-dialog__body input, .el-dialog__body textarea",s)}typeof(e==null?void 0:e.focus)=="function"&&e.focus()}const q={};return k(F.getExposeProxy(q,f)),(e,t)=>(l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createVNode(a.unref(M.ElDialog),l.mergeProps({ref_key:"$dialog",ref:f},e.$attrs,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=i=>d.value=i),class:["k-dialog",{"k-dialog-resizable":u.value&&!n.value},{"k-dialog__is-show-handler":u.value&&e.showResizeHandles}],fullscreen:n.value,draggable:u.value||e.draggable,style:u.value?{minWidth:e.minWidth+"px",minHeight:e.minHeight+"px"}:{},onOpened:b}),l.createSlots({header:l.withCtx(()=>[u.value&&e.showResizeHandles?(l.openBlock(),l.createElementBlock("div",x,[l.createElementVNode("div",D,[l.renderSlot(e.$slots,"header",{},()=>[l.createTextVNode(p.toDisplayString(e.title),1)])]),l.createElementVNode("div",H,[l.createVNode(a.unref(N.default),{class:"mr-3",onClick:V}),(l.openBlock(),l.createBlock(l.resolveDynamicComponent(n.value?a.unref(R.default):a.unref(S.default)),{onClick:z})),l.createVNode(a.unref(v.default),{class:"ml-3",onClick:t[0]||(t[0]=()=>d.value=!1)})])])):l.renderSlot(e.$slots,"header",{key:1},()=>[l.createTextVNode(p.toDisplayString(e.title),1)])]),_:2},[l.renderList(a.unref(w)(e.$slots),(i,r)=>({name:r,fn:l.withCtx(s=>[l.renderSlot(e.$slots,r,p.normalizeProps(l.guardReactiveProps(s)))])}))]),1040,["modelValue","class","fullscreen","draggable","style"]),c.value&&u.value?(l.openBlock(),l.createBlock(a.unref(T.ElCard),{key:0,shadow:"always",class:"k-dialog-minimization"},{default:l.withCtx(()=>[l.createElementVNode("div",P,[l.createElementVNode("div",O,[l.renderSlot(e.$slots,"header",{},()=>[l.createTextVNode(p.toDisplayString(e.title),1)])]),l.createVNode(a.unref(E.default),{size:18,class:"k-dialog__card-icon k-dialog__card-restore-icon",onClick:t[2]||(t[2]=()=>d.value=!0)}),l.createVNode(a.unref(v.default),{class:"k-dialog__card-icon",onClick:t[3]||(t[3]=()=>c.value=!1)})])]),_:3})):l.createCommentVNode("",!0)],64))}});exports.default=W;
