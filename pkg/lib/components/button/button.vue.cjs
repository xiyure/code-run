"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const n=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");const T=require("../../utils/color.cjs"),D=require("./const.cjs"),E=require("../../hooks/use_size.cjs"),N=require("../../node_modules/element-plus/es/components/button/index.cjs"),t=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),d=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),P=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),_={key:0,class:"k-button__content"},R={key:1,class:"k-button__content"},I=t.defineComponent({name:"KButton",__name:"button",props:{type:{default:""},main:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},text:{type:Boolean,default:!1},icon:{type:Boolean,default:!1},size:{},iconLeft:{default:""},iconRight:{default:""},value:{default:""},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{default:"IconLoading"},color:{default:""},shadow:{type:Boolean},useDefaultStyle:{type:Boolean,default:!0}},setup(S,{expose:v}){const p=["main","secondary","text","icon"],i={primary:n.getCSSVar("--k-theme-primary"),success:n.getCSSVar("--k-theme-success"),info:n.getCSSVar("--k-theme-info"),warning:n.getCSSVar("--k-theme-warning"),danger:n.getCSSVar("--k-theme-danger")},o=S,y=E.useSize(o),l=d.ref(),C=t.computed(()=>!!(o.main||!o.secondary&&!o.text&&(i[o.type]||n.isValidColor(o.color)))),$=t.computed(()=>{const{ownSize:e}=y.value;return e?`el-button--${e}`:""}),w=t.computed(()=>{if(i[o.type])return"";for(let e=0;e<p.length;e++)if(o[p[e]])return"";return"k-button--base"}),f=t.computed(()=>{var a;const{color:e,type:r}=o,s=e||i[r]||i.primary;return((a=T.GetColorLevelNew(s))==null?void 0:a.colorLevel)??{}}),V=t.computed(()=>{var a,u,c;const{shadow:e,text:r}=o;if(!e||!r)return"";const s=(c=(u=(a=f.value)==null?void 0:a["--k-oklch-500"])==null?void 0:u.match(/\(([^)]+)\)/))==null?void 0:c[1];return{"--text-shadow-color":s?`rgba(${s}, 0.08)`:"transparent"}});t.watch([()=>o.color,()=>o.type],()=>{t.nextTick(()=>{var e,r,s,a,u,c,g;if((r=(e=l==null?void 0:l.value)==null?void 0:e.$el)!=null&&r.style){const m=(s=l.value.$el)==null?void 0:s.classList,L=(c=(u=(a=f.value)==null?void 0:a["--k-oklch-500"])==null?void 0:u.match(/\(([^)]+)\)/))==null?void 0:c[1];for(const b of D.btnTypes){const z=`el-button--${b.type}`;m!=null&&m.contains(z)&&b.vars.forEach(k=>{var h,B;(B=l.value.$el)==null||B.style.setProperty(`--k-button-${k.name}`,(h=f.value)==null?void 0:h[`--k-oklch-${k.value}`])})}(g=l.value.$el)==null||g.style.setProperty("--k-button-focus",`rgba(${L}, 0.2)`)}})},{immediate:!0});const q={size:t.computed(()=>y.value.ownSize)};return v(n.getExposeProxy(q,l)),(e,r)=>(t.openBlock(),t.createBlock(d.unref(N.ElButton),t.mergeProps({ref_key:"buttonRef",ref:l,class:["k-button",["el-button",{"el-button--main":C.value,"el-button--secondary":e.secondary,"el-button--text":e.text,"el-button--icon":e.icon,"is-loading":e.loading,"is-disabled":e.disabled,"button-loading":e.loading,"is-shadow":e.shadow,"use-default-style":e.useDefaultStyle},i[o.type]?`el-button--${e.type}`:"",$.value,w.value]],style:V.value,loading:e.loading,"loading-icon":e.loadingIcon,disabled:e.disabled},e.$attrs),{default:t.withCtx(()=>[t.renderSlot(e.$slots,d.unref(n.compatibleSlots)(e.$slots,["icon-left","iconLeft"]),{class:"icon-left"},()=>[o.iconLeft?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o.iconLeft),{key:0})):t.createCommentVNode("",!0)]),o.value&&o.icon===!1?(t.openBlock(),t.createElementBlock("label",_,P.toDisplayString(o.value),1)):e.$slots.default?(t.openBlock(),t.createElementBlock("label",R,[t.renderSlot(e.$slots,"default",{class:"slot-content"})])):t.createCommentVNode("",!0),t.renderSlot(e.$slots,d.unref(n.compatibleSlots)(e.$slots,["icon-right","iconRight"]),{class:"icon-right"},()=>[o.iconRight?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o.iconRight),{key:0})):t.createCommentVNode("",!0)]),o.loading?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o.loadingIcon),{key:2,class:"loading-icon"})):t.createCommentVNode("",!0)]),_:3},16,["class","style","loading","loading-icon","disabled"]))}});exports.default=I;
