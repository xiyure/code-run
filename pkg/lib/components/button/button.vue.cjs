"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),n=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");const z=require("../../utils/color.cjs"),T=require("./const.cjs"),D=require("../../hooks/use_size.cjs"),E=require("../../node_modules/element-plus/es/components/button/index.cjs"),N={key:0,class:"k-button__content"},P={key:1,class:"k-button__content"},R=e.defineComponent({name:"KButton",__name:"button",props:{type:{default:""},main:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},text:{type:Boolean,default:!1},icon:{type:Boolean,default:!1},size:{},iconLeft:{default:""},iconRight:{default:""},value:{default:""},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{default:"IconLoading"},color:{default:""},shadow:{type:Boolean},useDefaultStyle:{type:Boolean,default:!0}},setup(S,{expose:v}){const p=["main","secondary","text","icon"],c={primary:n.getCSSVar("--k-theme-primary"),success:n.getCSSVar("--k-theme-success"),info:n.getCSSVar("--k-theme-info"),warning:n.getCSSVar("--k-theme-warning"),danger:n.getCSSVar("--k-theme-danger")},o=S,y=D.useSize(o),l=e.ref(),B=e.computed(()=>!!(o.main||!o.secondary&&!o.text&&(c[o.type]||n.isValidColor(o.color)))),C=e.computed(()=>{const{ownSize:t}=y.value;return t?`el-button--${t}`:""}),$=e.computed(()=>{if(c[o.type])return"";for(let t=0;t<p.length;t++)if(o[p[t]])return"";return"k-button--base"}),d=e.computed(()=>{var a;const{color:t,type:s}=o,r=t||c[s]||c.primary;return((a=z.GetColorLevelNew(r))==null?void 0:a.colorLevel)??{}}),w=e.computed(()=>{var a,i,u;const{shadow:t,text:s}=o;if(!t||!s)return"";const r=(u=(i=(a=d.value)==null?void 0:a["--k-oklch-500"])==null?void 0:i.match(/\(([^)]+)\)/))==null?void 0:u[1];return{"--text-shadow-color":r?`rgba(${r}, 0.08)`:"transparent"}});e.watch([()=>o.color,()=>o.type],()=>{e.nextTick(()=>{var t,s,r,a,i,u,m;if((s=(t=l==null?void 0:l.value)==null?void 0:t.$el)!=null&&s.style){const f=(r=l.value.$el)==null?void 0:r.classList,L=(u=(i=(a=d.value)==null?void 0:a["--k-oklch-500"])==null?void 0:i.match(/\(([^)]+)\)/))==null?void 0:u[1];for(const g of T.btnTypes){const q=`el-button--${g.type}`;f!=null&&f.contains(q)&&g.vars.forEach(b=>{var k,h;(h=l.value.$el)==null||h.style.setProperty(`--k-button-${b.name}`,(k=d.value)==null?void 0:k[`--k-oklch-${b.value}`])})}(m=l.value.$el)==null||m.style.setProperty("--k-button-focus",`rgba(${L}, 0.2)`)}})},{immediate:!0});const V={size:e.computed(()=>y.value.ownSize)};return v(n.getExposeProxy(V,l)),(t,s)=>(e.openBlock(),e.createBlock(e.unref(E.ElButton),e.mergeProps({ref_key:"buttonRef",ref:l,class:["k-button",["el-button",{"el-button--main":B.value,"el-button--secondary":t.secondary,"el-button--text":t.text,"el-button--icon":t.icon,"is-loading":t.loading,"is-disabled":t.disabled,"button-loading":t.loading,"is-shadow":t.shadow,"use-default-style":t.useDefaultStyle},c[o.type]?`el-button--${t.type}`:"",C.value,$.value]],style:w.value,loading:t.loading,"loading-icon":t.loadingIcon,disabled:t.disabled},t.$attrs),{default:e.withCtx(()=>[e.renderSlot(t.$slots,e.unref(n.compatibleSlots)(t.$slots,["icon-left","iconLeft"]),{class:"icon-left"},()=>[o.iconLeft?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.iconLeft),{key:0})):e.createCommentVNode("",!0)]),o.value&&o.icon===!1?(e.openBlock(),e.createElementBlock("label",N,e.toDisplayString(o.value),1)):t.$slots.default?(e.openBlock(),e.createElementBlock("label",P,[e.renderSlot(t.$slots,"default",{class:"slot-content"})])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,e.unref(n.compatibleSlots)(t.$slots,["icon-right","iconRight"]),{class:"icon-right"},()=>[o.iconRight?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.iconRight),{key:0})):e.createCommentVNode("",!0)]),o.loading?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.loadingIcon),{key:2,class:"loading-icon"})):e.createCommentVNode("",!0)]),_:3},16,["class","style","loading","loading-icon","disabled"]))}});exports.default=R;
