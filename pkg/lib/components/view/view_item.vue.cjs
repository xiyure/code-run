"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),_=require("../../hooks/use_locale.cjs"),m=require("./const.cjs"),h=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const k=require("../../utils/dom.cjs"),a=require("../../node_modules/element-plus/es/components/dropdown/index.cjs"),g=require("../../node_modules/ksw-vue-icon/es/icons/base/ellipsis-horizontal.cjs"),y=["data-view-value"],V={class:"k-view-item__label"},E={class:"k-view-item__other"},b={key:0},B=e.defineComponent({name:"KViewItem",__name:"view_item",props:{label:{},value:{},count:{},custom:{type:Boolean},disabled:{type:Boolean},showCustomControl:{type:Boolean},originData:{}},emits:["change","remove"],setup(d,{emit:v}){const{t:p}=_.useLocale(),i=d,s=v,c=e.inject(m.ACTIVE_VIEW_KEY,e.ref(0)),r=e.inject(m.P_PROPS_KEY,{}),l=e.computed(()=>{const{iconMethod:t}=r??{};if(typeof t!="function")return null;const n=t(i.originData,void 0),o=(n==null?void 0:n.icon)??n;return typeof o=="string"||k.isVueComponent(o)?{_icon:o,...h.getRestAttrs(n,["icon"])}:null});function w(t){switch(t){case"remove":C()}}function f(){i.disabled||c.value===i.value||s("change",i.originData)}function C(){s("remove",i.originData)}return(t,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["k-view-item",{"k-view-active":e.unref(c)===t.value,"k-view-disabled":t.disabled,"k-view-custom":t.custom,"k-view-common":!t.custom}]),"data-view-value":t.value,onClick:f},[e.createElementVNode("div",V,[e.renderSlot(t.$slots,"label",{},()=>[e.renderSlot(t.$slots,"label-text",{},()=>{var o,u;return[(o=l.value)!=null&&o._icon?(e.openBlock(),e.createBlock(e.resolveDynamicComponent((u=l.value)==null?void 0:u._icon),{key:0,style:e.normalizeStyle({marginRight:"0.25rem",...l.value})},null,8,["style"])):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(i.label),1)]})])]),e.createElementVNode("div",E,[e.unref(r).showCount?(e.openBlock(),e.createElementBlock("span",b,e.toDisplayString(i.count),1)):e.createCommentVNode("",!0),t.showCustomControl??e.unref(r).showCustomControl?(e.openBlock(),e.createBlock(e.unref(a.ElDropdown),{key:1,trigger:"click",onCommand:w},{dropdown:e.withCtx(()=>[e.createVNode(e.unref(a.ElDropdownMenu),null,{default:e.withCtx(()=>[e.createVNode(e.unref(a.ElDropdownItem),{command:"remove"},{default:e.withCtx(()=>{var o;return[e.createTextVNode(e.toDisplayString((o=e.unref(p))==null?void 0:o("view.remove")),1)]}),_:1})]),_:1})]),default:e.withCtx(()=>[e.createElementVNode("span",{class:"k-view-item-remove",onClick:n[0]||(n[0]=e.withModifiers(()=>{},["stop","prevent"]))},[e.createVNode(e.unref(g.default))])]),_:1})):e.createCommentVNode("",!0)])],10,y))}});exports.default=B;
