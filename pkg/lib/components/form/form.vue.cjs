"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),w=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const l=require("../../utils/dom.cjs"),m=require("../../hooks/use_size.cjs"),y=require("./const.cjs"),h=require("../../node_modules/element-plus/es/components/form/index.cjs"),E=t.defineComponent({name:"KForm",__name:"form",props:{size:{},showColon:{type:Boolean},showLabel:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},requireAsteriskPosition:{default:"left"},autoFocusFirst:{type:Boolean,default:!1},autoFocusTo:{}},emits:["submit"],setup(p,{expose:q,emit:F}){const o=p;t.onMounted(()=>{window.addEventListener("keydown",f),setTimeout(()=>{(o.autoFocusFirst||o.autoFocusTo)&&k()})}),t.onUnmounted(()=>{window.removeEventListener("keydown",f)});const c=F,a=m.useSize(o),u=t.ref();function k(){var r,i;let e=null;if(typeof o.autoFocusTo=="string")e=l.getElement(o.autoFocusTo);else{const s=o.autoFocusTo;e=(s==null?void 0:s.$el)??s}if(e&&l.isInputElement(e)){(r=e.focus)==null||r.call(e);return}e=e?l.getElement("input, textarea",e):null,!e&&((i=u.value)!=null&&i.$el)&&o.autoFocusFirst&&(e=l.getElement("input, textarea",u.value.$el)),typeof(e==null?void 0:e.focus)=="function"&&e.focus()}function f(e){var d;if(e.key!=="Enter")return;const r=Array.from(document.querySelectorAll("button, input, a[href], area[href]")),i=document.activeElement;if(!i)return;const s=r.indexOf(i),n=(d=u.value)==null?void 0:d.$el;n!=null&&n.contains(r[s])&&(s===r.length-1||!(n!=null&&n.contains(r[s+1])))&&c("submit")}const v={size:t.computed(()=>a.value.ownSize)};return q(w.getExposeProxy(v,u)),t.provide(m.SIZE_KEY,a),t.provide(y.FORM_PARAMS_KEY,t.computed(()=>({showColon:o.showColon,showLabel:o.showLabel,hideRequiredAsterisk:o.hideRequiredAsterisk,requireAsteriskPosition:o.requireAsteriskPosition}))),(e,r)=>(t.openBlock(),t.createBlock(t.unref(h.ElForm),t.mergeProps({ref_key:"KFormRef",ref:u,class:"k-form"},e.$attrs,{size:t.unref(a).elSize,"hide-required-asterisk":!0,onSubmit:r[0]||(r[0]=()=>{c("submit")})}),t.createSlots({_:2},[t.renderList(e.$slots,(i,s)=>({name:s,fn:t.withCtx(n=>[t.renderSlot(e.$slots,s,t.normalizeProps(t.guardReactiveProps(n)))])}))]),1040,["size"]))}});exports.default=E;
