"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const v=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const l=require("../../utils/dom.cjs"),p=require("../../hooks/use_size.cjs"),w=require("./const.cjs"),_=require("../../node_modules/element-plus/es/components/form/index.cjs"),t=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),c=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),E=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),S=t.defineComponent({name:"KForm",__name:"form",props:{size:{},showColon:{type:Boolean},showLabel:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},requireAsteriskPosition:{default:"left"},autoFocusFirst:{type:Boolean,default:!1},autoFocusTo:{}},emits:["submit"],setup(q,{expose:y,emit:F}){const o=q;t.onMounted(()=>{window.addEventListener("keydown",m),setTimeout(()=>{(o.autoFocusFirst||o.autoFocusTo)&&h()})}),t.onUnmounted(()=>{window.removeEventListener("keydown",m)});const d=F,a=p.useSize(o),u=c.ref();function h(){var s,i;let e=null;if(typeof o.autoFocusTo=="string")e=l.getElement(o.autoFocusTo);else{const r=o.autoFocusTo;e=(r==null?void 0:r.$el)??r}if(e&&l.isInputElement(e)){(s=e.focus)==null||s.call(e);return}e=e?l.getElement("input, textarea",e):null,!e&&((i=u.value)!=null&&i.$el)&&o.autoFocusFirst&&(e=l.getElement("input, textarea",u.value.$el)),typeof(e==null?void 0:e.focus)=="function"&&e.focus()}function m(e){var f;if(e.key!=="Enter")return;const s=Array.from(document.querySelectorAll("button, input, a[href], area[href]")),i=document.activeElement;if(!i)return;const r=s.indexOf(i),n=(f=u.value)==null?void 0:f.$el;n!=null&&n.contains(s[r])&&(r===s.length-1||!(n!=null&&n.contains(s[r+1])))&&d("submit")}const k={size:t.computed(()=>a.value.ownSize)};return y(v.getExposeProxy(k,u)),t.provide(p.SIZE_KEY,a),t.provide(w.FORM_PARAMS_KEY,t.computed(()=>({showColon:o.showColon,showLabel:o.showLabel,hideRequiredAsterisk:o.hideRequiredAsterisk,requireAsteriskPosition:o.requireAsteriskPosition}))),(e,s)=>(t.openBlock(),t.createBlock(c.unref(_.ElForm),t.mergeProps({ref_key:"KFormRef",ref:u,class:"k-form"},e.$attrs,{size:c.unref(a).elSize,"hide-required-asterisk":!0,onSubmit:s[0]||(s[0]=()=>{d("submit")})}),t.createSlots({_:2},[t.renderList(e.$slots,(i,r)=>({name:r,fn:t.withCtx(n=>[t.renderSlot(e.$slots,r,E.normalizeProps(t.guardReactiveProps(n)))])}))]),1040,["size"]))}});exports.default=S;
