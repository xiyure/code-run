"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const h=require("../../hooks/use_locale.cjs"),B=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const C=require("../../node_modules/ksw-vue-icon/es/icons/base/check.cjs"),N=require("../../node_modules/ksw-vue-icon/es/icons/base/delete.cjs"),q=require("../../node_modules/ksw-vue-icon/es/icons/base/EmptyBox.cjs"),V=require("../../node_modules/ksw-vue-icon/es/icons/base/file.cjs"),b=require("../../node_modules/ksw-vue-icon/es/icons/base/warning.cjs"),E=require("../../node_modules/element-plus/es/components/progress/index.cjs"),w=require("../../node_modules/element-plus/es/components/upload/index.cjs"),e=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),r=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),c=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),S=require("../../node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.cjs"),I={key:0,class:"default-sign"},U={class:"file-list"},D=["onClick"],P={class:"header-icon"},T=["title"],x={class:"status-icon-box"},F={class:"status-icon"},R={class:"remove-file"},K={class:"el-upload__tip"},M=e.defineComponent({name:"KUpload",__name:"upload",props:{action:{},drag:{type:Boolean},autoUpload:{type:Boolean,default:!0},disabled:{type:Boolean},listType:{default:"text"},removeIcon:{},successIcon:{},failIcon:{},onPreview:{}},setup(g,{expose:v}){const{t:d}=h.useLocale(),o=g,s=r.ref(),y=e.computed(()=>t=>{if(t==="success"&&o.successIcon)return o.successIcon;if(t==="success")return C.default;if(t==="fail"&&o.failIcon)return o.failIcon;if(t==="fail")return b.default});function u(t){var l;t&&t.stopPropagation(),t&&t.preventDefault(),(l=s.value)==null||l.submit()}function p(t,l){var i;(i=s.value)==null||i.handleRemove(t,l)}function f(t){var l;(l=o.onPreview)==null||l.call(o,t)}function m(){s.value.$el.querySelector("input").click()}const _={submit:u,selectFile:m,handleRemove:p};return v(B.getExposeProxy(_,s)),(t,l)=>{const i=e.resolveComponent("k-button");return e.openBlock(),e.createElementBlock("div",{class:c.normalizeClass(["k-upload",{"k-dragger":t.drag}])},[e.createVNode(r.unref(w.ElUpload),e.mergeProps({ref_key:"KUploadRef",ref:s},t.$attrs,{action:t.action,"on-preview":f,"auto-upload":t.autoUpload,disabled:t.disabled,drag:t.drag,"list-type":t.listType}),e.createSlots({trigger:e.withCtx(()=>[e.renderSlot(t.$slots,"trigger",{},()=>{var n;return[o.drag?(e.openBlock(),e.createElementBlock("div",I,[e.createVNode(r.unref(q.default),{color:"#2882ff"}),e.createTextVNode(" "+c.toDisplayString((n=r.unref(d))==null?void 0:n("upload.uploadDragSign")),1)])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"default-upload-btn",onClick:l[0]||(l[0]=S.withModifiers(()=>{},["stop"]))},[e.createVNode(i,{secondary:"","icon-left":t.autoUpload?"IconUpload":"",onClick:m},{default:e.withCtx(()=>{var a,k;return[e.createTextVNode(c.toDisplayString(o.autoUpload?(a=r.unref(d))==null?void 0:a("upload.uploadFile"):(k=r.unref(d))==null?void 0:k("upload.selectFile")),1)]}),_:1},8,["icon-left"]),o.autoUpload?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(i,{key:0,main:"",class:"main-btn",disabled:o.disabled,"icon-left":"IconUpload",onClick:u},{default:e.withCtx(()=>{var a;return[e.createTextVNode(c.toDisplayString((a=r.unref(d))==null?void 0:a("upload.uploadFile")),1)]}),_:1},8,["disabled"]))]))]})]),default:e.withCtx(()=>[e.renderSlot(t.$slots,"default")]),tip:e.withCtx(()=>[e.createElementVNode("div",K,[e.renderSlot(t.$slots,"tip")])]),_:2},[t.listType==="text"?{name:"file",fn:e.withCtx(({file:n})=>[e.renderSlot(t.$slots,"file",{},()=>[e.createElementVNode("div",U,[e.createElementVNode("div",null,[e.createElementVNode("a",{onClick:a=>f(n)},[e.createElementVNode("span",P,[e.createVNode(r.unref(V.default))]),e.createElementVNode("span",{title:n.name},c.toDisplayString(n.name),9,T)],8,D),n.status==="uploading"?(e.openBlock(),e.createBlock(r.unref(E.ElProgress),{key:0,type:"line","stroke-width":2,percentage:Number(n.percentage),style:"margin-top: 0.5rem"},null,8,["percentage"])):e.createCommentVNode("",!0)]),e.createElementVNode("div",x,[e.createElementVNode("span",F,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(y.value(n.status)),{color:n.status==="success"?"#22c55e":"#ef4444"},null,8,["color"]))]),e.createElementVNode("span",R,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.removeIcon??r.unref(N.default)),{color:"#f97316",onClick:a=>p(n)},null,8,["onClick"]))])])])])]),key:"0"}:void 0]),1040,["action","auto-upload","disabled","drag","list-type"])],2)}}});exports.default=M;
