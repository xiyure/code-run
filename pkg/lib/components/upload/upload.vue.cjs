"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),y=require("../../hooks/use_locale.cjs"),_=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const h=require("../../node_modules/ksw-vue-icon/es/icons/base/check.cjs"),C=require("../../node_modules/ksw-vue-icon/es/icons/base/delete.cjs"),N=require("../../node_modules/ksw-vue-icon/es/icons/base/EmptyBox.cjs"),B=require("../../node_modules/ksw-vue-icon/es/icons/base/file.cjs"),V=require("../../node_modules/ksw-vue-icon/es/icons/base/warning.cjs"),b=require("../../node_modules/element-plus/es/components/upload/index.cjs"),E=require("../../node_modules/element-plus/es/components/progress/index.cjs"),q={key:0,class:"default-sign"},w={class:"file-list"},S=["onClick"],I={class:"header-icon"},U=["title"],D={class:"status-icon-box"},P={class:"status-icon"},T={class:"remove-file"},x={class:"el-upload__tip"},F=e.defineComponent({name:"KUpload",__name:"upload",props:{action:{},drag:{type:Boolean},autoUpload:{type:Boolean,default:!0},disabled:{type:Boolean},listType:{default:"text"},removeIcon:{},successIcon:{},failIcon:{},onPreview:{}},setup(m,{expose:k}){const{t:c}=y.useLocale(),t=m,r=e.ref(),g=e.computed(()=>o=>{if(o==="success"&&t.successIcon)return t.successIcon;if(o==="success")return h.default;if(o==="fail"&&t.failIcon)return t.failIcon;if(o==="fail")return V.default});function i(o){var l;o&&o.stopPropagation(),o&&o.preventDefault(),(l=r.value)==null||l.submit()}function d(o,l){var s;(s=r.value)==null||s.handleRemove(o,l)}function u(o){var l;(l=t.onPreview)==null||l.call(t,o)}function p(){r.value.$el.querySelector("input").click()}const v={submit:i,selectFile:p,handleRemove:d};return k(_.getExposeProxy(v,r)),(o,l)=>{const s=e.resolveComponent("k-button");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["k-upload",{"k-dragger":o.drag}])},[e.createVNode(e.unref(b.ElUpload),e.mergeProps({ref_key:"KUploadRef",ref:r},o.$attrs,{action:o.action,"on-preview":u,"auto-upload":o.autoUpload,disabled:o.disabled,drag:o.drag,"list-type":o.listType}),e.createSlots({trigger:e.withCtx(()=>[e.renderSlot(o.$slots,"trigger",{},()=>{var n;return[t.drag?(e.openBlock(),e.createElementBlock("div",q,[e.createVNode(e.unref(N.default),{color:"#2882ff"}),e.createTextVNode(" "+e.toDisplayString((n=e.unref(c))==null?void 0:n("upload.uploadDragSign")),1)])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"default-upload-btn",onClick:l[0]||(l[0]=e.withModifiers(()=>{},["stop"]))},[e.createVNode(s,{secondary:"","icon-left":o.autoUpload?"IconUpload":"",onClick:p},{default:e.withCtx(()=>{var a,f;return[e.createTextVNode(e.toDisplayString(t.autoUpload?(a=e.unref(c))==null?void 0:a("upload.uploadFile"):(f=e.unref(c))==null?void 0:f("upload.selectFile")),1)]}),_:1},8,["icon-left"]),t.autoUpload?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(s,{key:0,main:"",class:"main-btn",disabled:t.disabled,"icon-left":"IconUpload",onClick:i},{default:e.withCtx(()=>{var a;return[e.createTextVNode(e.toDisplayString((a=e.unref(c))==null?void 0:a("upload.uploadFile")),1)]}),_:1},8,["disabled"]))]))]})]),default:e.withCtx(()=>[e.renderSlot(o.$slots,"default")]),tip:e.withCtx(()=>[e.createElementVNode("div",x,[e.renderSlot(o.$slots,"tip")])]),_:2},[o.listType==="text"?{name:"file",fn:e.withCtx(({file:n})=>[e.renderSlot(o.$slots,"file",{},()=>[e.createElementVNode("div",w,[e.createElementVNode("div",null,[e.createElementVNode("a",{onClick:a=>u(n)},[e.createElementVNode("span",I,[e.createVNode(e.unref(B.default))]),e.createElementVNode("span",{title:n.name},e.toDisplayString(n.name),9,U)],8,S),n.status==="uploading"?(e.openBlock(),e.createBlock(e.unref(E.ElProgress),{key:0,type:"line","stroke-width":2,percentage:Number(n.percentage),style:"margin-top: 0.5rem"},null,8,["percentage"])):e.createCommentVNode("",!0)]),e.createElementVNode("div",D,[e.createElementVNode("span",P,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(g.value(n.status)),{color:n.status==="success"?"#22c55e":"#ef4444"},null,8,["color"]))]),e.createElementVNode("span",T,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.removeIcon??e.unref(C.default)),{color:"#f97316",onClick:a=>d(n)},null,8,["onClick"]))])])])])]),key:"0"}:void 0]),1040,["action","auto-upload","disabled","drag","list-type"])],2)}}});exports.default=F;
