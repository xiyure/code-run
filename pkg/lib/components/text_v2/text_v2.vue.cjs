"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),k=require("../../hooks/use_locale.cjs"),h=e.defineComponent({name:"KTextV2",__name:"text_v2",props:{content:{},type:{},size:{default:"base"},lineHeight:{default:1.5},lineClamp:{default:1},truncated:{type:Boolean,default:!1},color:{},tag:{default:"span"},expandText:{},collapseText:{},showHandler:{type:[Boolean,String],default:!1}},setup(p,{expose:f}){const v={primary:"var(--k-status-primary)",success:"var(--k-status-success)",warning:"var(--k-status-warning)",danger:"var(--k-status-danger)",info:"var(--k-status-info)"},{t:i}=k.useLocale(),n=p,o=e.ref(),s=e.ref(),l=e.ref(!1),a=e.ref(!1);e.onMounted(()=>{r()}),e.onUpdated(()=>{setTimeout(()=>{r()},50)});const g=e.computed(()=>({"--line-height":n.lineHeight+"rem","--text-color":m.value,"--expand-text":`'${n.expandText||i("text.expand")}''`,"max-height":a.value?"none":`${n.lineHeight*n.lineClamp}rem`})),m=e.computed(()=>n.color??(n.type&&v[n.type]));function r(){if(a.value){l.value=!1;return}e.nextTick(()=>{if(s.value&&o.value){const{height:t}=o.value.getBoundingClientRect(),{height:d}=s.value.getBoundingClientRect();l.value=d>=t}else l.value=!1})}function c(){a.value=!0,r()}function u(){a.value=!1}function x(){if(a.value){u();return}c()}return f({expand:c,collapse:u,toggle:x}),(t,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["k-text-v2",{"is-ellipsis":t.truncated},`k-text-v2__${t.size}`])},[e.createElementVNode("div",{ref_key:"containerRef",ref:o,class:"k-text-v2-container",style:e.normalizeStyle(g.value)},[l.value?(e.openBlock(),e.createElementBlock("label",{key:0,class:e.normalizeClass(["k-text-v2__expand",{"allow-expand":t.showHandler===!0||t.showHandler==="expand"}]),onClick:c},null,2)):e.createCommentVNode("",!0),e.createVNode(n.tag,{ref_key:"contentRef",ref:s,class:"k-text-v2__content"},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(t.content),1)])]),_:3},512),(t.showHandler===!0||t.showHandler==="collapse")&&a.value?(e.openBlock(),e.createElementBlock("span",{key:1,class:"k-text-v2__collapse",onClick:u},e.toDisplayString(n.collapseText||e.unref(i)("text.collapse")),1)):e.createCommentVNode("",!0)],4)],2))}});exports.default=h;
