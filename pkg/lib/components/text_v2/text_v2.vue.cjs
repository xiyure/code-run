"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const y=require("../../hooks/use_locale.cjs"),e=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),l=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),o=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),_=e.defineComponent({name:"KTextV2",__name:"text_v2",props:{content:{},type:{},size:{default:"base"},lineHeight:{default:1.5},lineClamp:{default:1},truncated:{type:Boolean,default:!1},color:{},tag:{default:"span"},expandText:{},collapseText:{},showHandler:{type:[Boolean,String],default:!1}},setup(v,{expose:m}){const g={primary:"var(--k-status-primary)",success:"var(--k-status-success)",warning:"var(--k-status-warning)",danger:"var(--k-status-danger)",info:"var(--k-status-info)"},{t:p}=y.useLocale(),n=v,r=l.ref(),u=l.ref(),s=l.ref(!1),a=l.ref(!1);e.onMounted(()=>{c()}),e.onUpdated(()=>{setTimeout(()=>{c()},50)});const x=e.computed(()=>({"--line-height":n.lineHeight+"rem","--text-color":k.value,"--expand-text":`'${n.expandText||p("text.expand")}''`,"max-height":a.value?"none":`${n.lineHeight*n.lineClamp}rem`})),k=e.computed(()=>n.color??(n.type&&g[n.type]));function c(){if(a.value){s.value=!1;return}e.nextTick(()=>{if(u.value&&r.value){const{height:t}=r.value.getBoundingClientRect(),{height:f}=u.value.getBoundingClientRect();s.value=f>=t}else s.value=!1})}function i(){a.value=!0,c()}function d(){a.value=!1}function h(){if(a.value){d();return}i()}return m({expand:i,collapse:d,toggle:h}),(t,f)=>(e.openBlock(),e.createElementBlock("div",{class:o.normalizeClass(["k-text-v2",{"is-ellipsis":t.truncated},`k-text-v2__${t.size}`])},[e.createElementVNode("div",{ref_key:"containerRef",ref:r,class:"k-text-v2-container",style:o.normalizeStyle(x.value)},[s.value?(e.openBlock(),e.createElementBlock("label",{key:0,class:o.normalizeClass(["k-text-v2__expand",{"allow-expand":t.showHandler===!0||t.showHandler==="expand"}]),onClick:i},null,2)):e.createCommentVNode("",!0),e.createVNode(n.tag,{ref_key:"contentRef",ref:u,class:"k-text-v2__content"},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default",{},()=>[e.createTextVNode(o.toDisplayString(t.content),1)])]),_:3},512),(t.showHandler===!0||t.showHandler==="collapse")&&a.value?(e.openBlock(),e.createElementBlock("span",{key:1,class:"k-text-v2__collapse",onClick:d},o.toDisplayString(n.collapseText||l.unref(p)("text.collapse")),1)):e.createCommentVNode("",!0)],4)],2))}});exports.default=_;
