"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const g=require("../const.cjs"),c=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs");function w(s,d,i){const a=c.inject(g.TABLE_ID),l=c.inject(g.SORT_CONFIG_KEY,c.computed(()=>({}))),v=c.computed(()=>{var t;const{showIcon:e,iconVisibleMethod:r}=l.value;if(typeof r=="function"){const n=(t=s.value)==null?void 0:t.getColumnByField(d.field??null);return!!r({$table:s.value,column:n})}return d.sortable&&e!==!1}),S=c.computed(()=>{const{allowBtn:e=!0,trigger:r="default"}=l.value;return e&&r==="default"});function B(e,r,t){if(!S.value)return;const n=r.order;let o=null;e==="_asc-icon"&&n!=="asc"?o="asc":e==="_desc-icon"&&n!=="desc"&&(o="desc"),!(l.value.allowClear===!1&&o===null)&&f(r,o,t)}function f(e,r,t){var o;(o=s.value)==null||o.setSort({field:e.field??"",order:r},!1);const n=u();i.emit("sort-change",a,{column:e,field:e.field,order:r,sortBy:e.sortBy,sortList:n,$event:t}),!r&&i.emit("clear-sort",a,{sortList:u(),$event:t})}function p(e,r){const{orders:t=["asc","desc",null],trigger:n}=l.value;if(n!=="cell"||!e.sortable)return;const o=new Map([[t[0],t[1]],[t[1],t[2]],[t[2],t[0]]]),C=e.order,_=o.get(C);f(e,_,r)}function y(e,r){var t;(t=s.value)==null||t.clearSort(e),i.emit("clear-sort",a,{sortList:u(),$event:r})}function u(){var e;return((e=s.value)==null?void 0:e.getSortColumns())??[]}return{sortConfig:l,showSortIcon:v,allowButtonSort:S,changeSortStatus:B,tableSort:f,tableSortByHeader:p,clearSort:y,getSortColumns:u}}exports.useSort=w;
