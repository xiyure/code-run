"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("vue"),g=require("../const.cjs");function _(s,d,i){const a=c.inject(g.TABLE_ID),l=c.inject(g.SORT_CONFIG_KEY,c.computed(()=>({}))),v=c.computed(()=>{var e;const{showIcon:t,iconVisibleMethod:o}=l.value;if(typeof o=="function"){const n=(e=s.value)==null?void 0:e.getColumnByField(d.field??null);return!!o({$table:s.value,column:n})}return d.sortable&&t!==!1}),S=c.computed(()=>{const{allowBtn:t=!0,trigger:o="default"}=l.value;return t&&o==="default"});function B(t,o,e){if(!S.value)return;const n=o.order;let r=null;t==="_asc-icon"&&n!=="asc"?r="asc":t==="_desc-icon"&&n!=="desc"&&(r="desc"),!(l.value.allowClear===!1&&r===null)&&f(o,r,e)}function f(t,o,e){var r;(r=s.value)==null||r.setSort({field:t.field??"",order:o},!1);const n=u();i.emit("sort-change",a,{column:t,field:t.field,order:o,sortBy:t.sortBy,sortList:n,$event:e}),!o&&i.emit("clear-sort",a,{sortList:u(),$event:e})}function p(t,o){const{orders:e=["asc","desc",null],trigger:n}=l.value;if(n!=="cell"||!t.sortable)return;const r=new Map([[e[0],e[1]],[e[1],e[2]],[e[2],e[0]]]),w=t.order,C=r.get(w);f(t,C,o)}function y(t,o){var e;(e=s.value)==null||e.clearSort(t),i.emit("clear-sort",a,{sortList:u(),$event:o})}function u(){var t;return((t=s.value)==null?void 0:t.getSortColumns())??[]}return{sortConfig:l,showSortIcon:v,allowButtonSort:S,changeSortStatus:B,tableSort:f,tableSortByHeader:p,clearSort:y,getSortColumns:u}}exports.useSort=_;
