"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("vue"),t=require("../const.cjs");function k(i,o,a,u){const r=c.inject(t.TABLE_ID),F=c.inject(t.FILTER_CONFIG_KEY,c.computed(()=>({}))),E={setFilter:{name:t.SET_FILTER,callback:m},clearFilterOutside:{name:t.CLEAR_FILTER_OUTSIDE,callback:A},openFilterPanel:{name:t.OPEN_FILTER_PANEL,callback:v},closeFilterPanel:{name:t.CLOSE_FILTER_PANEL,callback:L},resetFilterPanel:{name:t.RESET_FILTER_PANEL,callback:C},saveFilterPanel:{name:t.SAVE_FILTER_PANEL,callback:S}};for(const e in E){const{name:l,callback:n}=E[e];a.on(l,r,n)}const f=c.ref(!1),T=c.computed(()=>{var e;return((e=i.value)==null?void 0:e.isActiveFilterByColumn(o.field))??!1}),_=c.computed(()=>{var n;const{showIcon:e,iconVisibleMethod:l}=F.value;if(typeof l=="function"){const s=(n=i.value)==null?void 0:n.getColumnByField(o.field??null);return!!l({$table:i.value,column:s})}return o.filters&&e!==!1}),I=c.computed(()=>{const{confirmButtonText:e,resetButtonText:l}=F.value;return{confirmButtonText:e,resetButtonText:l}});async function P(e){var n;const{filterList:l}=e;await((n=i.value)==null?void 0:n.setFilter(o.field,l)),a.emit(t.FILTER_CHANGE,r,e)}async function R(e){var l;i.value&&(await((l=i.value)==null?void 0:l.clearFilter(o.field)),a==null||a.emit(t.CLEAR_FILTER,r,e))}function d(e){a.emit(t.FILTER_VISIBLE,r,e)}function m(e,l){var n,s;(n=i.value)==null||n.setFilter(e,l),(s=u.value)==null||s.setFilter(l)}function A(e){var l,n;(l=i.value)==null||l.clearFilter(e),(n=u.value)==null||n.clearFilter()}function v(){f.value=!0}function L(){f.value=!1}function C(){var e;(e=u.value)==null||e.resetFilter()}function S(){var e;(e=u.value)==null||e.saveFilter()}return{showFilterIcon:_,isFilter:T,filterConfig:F,filterButtonText:I,filterPanelVisible:f,setFilter:P,clearFilter:R,filterVisible:d,onCloseFilterPanel:L,onOpenFilterPanel:v}}exports.useFilter=k;
