"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const t=require("../const.cjs"),a=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),S=require("../../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs");function y(i,r,c,u){const o=a.inject(t.TABLE_ID),F=a.inject(t.FILTER_CONFIG_KEY,a.computed(()=>({}))),E={setFilter:{name:t.SET_FILTER,callback:R},clearFilterOutside:{name:t.CLEAR_FILTER_OUTSIDE,callback:C},openFilterPanel:{name:t.OPEN_FILTER_PANEL,callback:v},closeFilterPanel:{name:t.CLOSE_FILTER_PANEL,callback:L},resetFilterPanel:{name:t.RESET_FILTER_PANEL,callback:A},saveFilterPanel:{name:t.SAVE_FILTER_PANEL,callback:B}};for(const e in E){const{name:l,callback:n}=E[e];c.on(l,o,n)}const f=S.ref(!1),_=a.computed(()=>{var e;return((e=i.value)==null?void 0:e.isActiveFilterByColumn(r.field))??!1}),T=a.computed(()=>{var n;const{showIcon:e,iconVisibleMethod:l}=F.value;if(typeof l=="function"){const s=(n=i.value)==null?void 0:n.getColumnByField(r.field??null);return!!l({$table:i.value,column:s})}return r.filters&&e!==!1}),I=a.computed(()=>{const{confirmButtonText:e,resetButtonText:l}=F.value;return{confirmButtonText:e,resetButtonText:l}});async function d(e){var n;const{filterList:l}=e;await((n=i.value)==null?void 0:n.setFilter(r.field,l)),c.emit(t.FILTER_CHANGE,o,e)}async function m(e){var l;i.value&&(await((l=i.value)==null?void 0:l.clearFilter(r.field)),c==null||c.emit(t.CLEAR_FILTER,o,e))}function P(e){c.emit(t.FILTER_VISIBLE,o,e)}function R(e,l){var n,s;(n=i.value)==null||n.setFilter(e,l),(s=u.value)==null||s.setFilter(l)}function C(e){var l,n;(l=i.value)==null||l.clearFilter(e),(n=u.value)==null||n.clearFilter()}function v(){f.value=!0}function L(){f.value=!1}function A(){var e;(e=u.value)==null||e.resetFilter()}function B(){var e;(e=u.value)==null||e.saveFilter()}return{showFilterIcon:T,isFilter:_,filterConfig:F,filterButtonText:I,filterPanelVisible:f,setFilter:d,clearFilter:m,filterVisible:P,onCloseFilterPanel:L,onOpenFilterPanel:v}}exports.useFilter=y;
