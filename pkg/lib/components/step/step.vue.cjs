"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const g=require("../popover/index.cjs"),k=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const q=require("../../node_modules/lodash-es/isNumber.cjs"),v=require("../../node_modules/element-plus/es/components/steps/index.cjs"),e=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),l=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),f=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),B=["id"],E={class:"k-step__title"},P=e.defineComponent({name:"KStep",__name:"step",props:{title:{default:""},description:{default:""},icon:{},status:{default:""},color:{},textColor:{}},setup(_,{expose:C}){const s=_,u=e.inject("stepProps",{}),m=e.inject("steps",[]),h=e.inject("stepMethods");h.registerStep(s.title);const y=k.genRandomStr(8),n={primary:"#2882FF",success:"#22C55E",error:"#EF4444",wait:"#EAE8EB"};e.watch(()=>s.title,(t,r)=>{t!==r&&h.updateStep(t,r)}),e.watch(()=>u.active,t=>{const r=m.indexOf(s.title);if(!q.default(t)||r===-1||s.status||s.color)return;t=Math.max(Math.min(t,m.length),-1);const o=Object.keys(n);let i="";if(t===r){const a=p(u.processStatus);i=o.includes(a)?n[a]:n.primary}else if(t>r){const a=p(u.finishStatus);i=o.includes(a)?n[a]:n.success}else i=n.wait;if(!i)return;const c=s.textColor||(t<r?"var(--k-theme-text--normal)":"#fff");d(i,c)},{immediate:!0}),e.watch(()=>[s.color,s.status],t=>{if(!t[0]&&!t[1])return;let r;n[s.status]?r=n[s.status]:s.color?r=s.color:r=n.primary;const o=s.textColor||(s.status==="wait"?"var(--k-theme-text--normal)":"#fff");d(r,o)},{immediate:!0}),e.watch(()=>s.textColor,t=>{d(void 0,t)});function d(t,r){typeof window<"u"&&e.nextTick(()=>{var i,c;const o=document.getElementById(y);t&&((i=o==null?void 0:o.style)==null||i.setProperty("--default-bg-color",t)),r&&((c=o==null?void 0:o.style)==null||c.setProperty("--default-color",r))})}function p(t){switch(t){case"primary":return"finish";case"wait":return"wait";case"success":return"success";case"error":return"error";default:return""}}const S=l.ref(null),x={};return C(k.getExposeProxy(x,S)),(t,r)=>l.unref(u).capsule?(e.openBlock(),e.createElementBlock("div",{key:1,id:l.unref(y),class:"k-step__capsule-box"},[e.createVNode(l.unref(g.KPopover),{"show-after":500,disabled:!s.description},{reference:e.withCtx(()=>[e.renderSlot(t.$slots,"title",{},()=>[e.createElementVNode("span",E,[s.icon?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(s.icon),{key:0})):e.createCommentVNode("",!0),e.createTextVNode(" "+f.toDisplayString(s.title),1)])])]),default:e.withCtx(()=>[e.createTextVNode(" "+f.toDisplayString(s.description),1)]),_:3},8,["disabled"])],8,B)):(e.openBlock(),e.createBlock(l.unref(v.ElStep),e.mergeProps({key:0,ref_key:"KStepRef",ref:S,class:"k-step"},t.$attrs,{title:t.title,description:t.description,icon:t.icon,status:p(t.status)}),e.createSlots({_:2},[e.renderList(t.$slots,(o,i)=>({name:i,fn:e.withCtx(c=>[e.renderSlot(t.$slots,i,f.normalizeProps(e.guardReactiveProps(c)))])}))]),1040,["title","description","icon","status"]))}});exports.default=P;
