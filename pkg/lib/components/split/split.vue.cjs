"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const X=require("./resize_observer.cjs"),Y=require("../../hooks/use_merge_state.cjs"),I=require("../../node_modules/ksw-vue-icon/es/icons/base/grip-vertical.cjs"),D=require("../../node_modules/ksw-vue-icon/es/icons/base/grip-horizontal.cjs"),F=require("../../node_modules/lodash-es/isString.cjs"),H=require("../../node_modules/lodash-es/isNumber.cjs"),n=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),u=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),o=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),j={class:"k-split-trigger-icon-wrapper"},K={key:1,class:"k-split-trigger-line"},O=n.defineComponent({name:"KSplit",__name:"split",props:{modelValue:{},defaultSize:{default:.5},component:{default:"div"},direction:{default:"horizontal"},min:{},max:{},disabled:{type:Boolean,default:!1},pane1Class:{default:""},pane1Style:{},pane2Class:{default:""},pane2Style:{},triggerIcon:{},showTrigger:{type:Boolean,default:!0}},emits:["moveStart","moving","moveEnd","update:modelValue"],setup(h,{emit:b}){const c=h,d=b;n.onMounted(async()=>{const e=await w(),t=k(p.value,e);y(t,e)});const r={startPageX:0,startPageY:0,startContainerSize:0,startSize:0},{direction:E,modelValue:V,defaultSize:B,min:q,max:M}=u.toRefs(c),[p,_]=Y.useMergeState(B.value,u.reactive({value:V})),z=u.ref(0),g=u.ref(),S=n.computed(()=>P(p.value)),s=n.computed(()=>E.value!=="vertical"),$=n.computed(()=>{const{size:e,unit:t,isPx:i}=S.value;return{flex:`0 0 calc(${i?e:e*100}${t} - ${z.value/2}px)`}}),L=n.computed(()=>c.triggerIcon?c.triggerIcon:s.value?I.default:D.default);async function w(){const e=()=>{var t,i;return s.value?(t=g.value)==null?void 0:t.clientWidth:((i=g.value)==null?void 0:i.clientHeight)||0};return(!g.value||e())&&await n.nextTick(),e()}function y(e,t){if(!t)return;const i=S.value.isPx?`${e}px`:N(e,t);i!==p.value&&(_(i),d("update:modelValue",i))}function k(e,t){const i=v({size:e,containerSize:t}),a=v({size:q.value,defaultSize:"0px",containerSize:t}),f=v({size:M.value,defaultSize:`${t}px`,containerSize:t});let l=i;return l=Math.max(l,a),l=Math.min(l,f),l}function N(e,t){return parseFloat(e)/parseFloat(t)}function P(e){const t=F.default(e)?parseFloat(e):e;let i="";return H.default(e)||String(t)===e?i=t>1?"px":"%":i="px",{size:t,unit:i,isPx:i==="px"}}async function R(e){c.disabled||(d("moveStart",e),r.startPageX=e.pageX,r.startPageY=e.pageY,r.startContainerSize=await w(),r.startSize=p.value,window.addEventListener("mousemove",x),window.addEventListener("mouseup",m),window.addEventListener("contextmenu",m),document.body.style.cursor=s.value?"col-resize":"row-resize",e.preventDefault())}function x(e){d("moving",e);const t=s.value?C({startContainerSize:r.startContainerSize,startSize:r.startSize,startPosition:r.startPageX,endPosition:e.pageX}):C({startContainerSize:r.startContainerSize,startSize:r.startSize,startPosition:r.startPageY,endPosition:e.pageY});y(t,r.startContainerSize)}function m(e){window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",m),window.removeEventListener("contextmenu",m),document.body.style.cursor="default",d("moveEnd",e)}function T(e){const{width:t,height:i}=e.contentRect;z.value=s.value?t:i}function C({startContainerSize:e,startSize:t,startPosition:i,endPosition:a}){const f=v({size:t,containerSize:e});return k(`${f+(a-i)}px`,e)}function v({size:e,defaultSize:t,containerSize:i}){const a=P(e??t??.5);return a.isPx?a.size:a.size*i}return(e,t)=>(n.openBlock(),n.createBlock(n.resolveDynamicComponent(e.component),{ref_key:"splitRef",ref:g,class:o.normalizeClass(["k-split",{"k-split-horizontal":s.value,"k-split-vertical":!s.value}])},{default:n.withCtx(()=>[n.createElementVNode("div",{class:o.normalizeClass(["k-split-pane","k-split-pane-first",e.pane1Class]),style:o.normalizeStyle({...$.value,...e.pane1Style})},[n.renderSlot(e.$slots,"first")],6),n.createVNode(u.unref(X.default),{onMousedown:R,onResize:T},{default:n.withCtx(()=>[n.createElementVNode("div",{class:o.normalizeClass(["k-split-trigger",{"k-split-trigger-horizontal":s.value,"k-split-trigger-vertical":!s.value,"k-split-trigger-disabled":e.disabled}])},[e.showTrigger?n.renderSlot(e.$slots,"trigger",{key:0},()=>[n.createElementVNode("div",j,[n.renderSlot(e.$slots,"trigger-icon",{},()=>[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(L.value),{class:"k-split-trigger-icon"}))])])]):(n.openBlock(),n.createElementBlock("div",K))],2)]),_:3}),n.createElementVNode("div",{class:o.normalizeClass(["k-split-pane","k-split-pane-second",e.pane2Class]),style:o.normalizeStyle(e.pane2Style)},[n.renderSlot(e.$slots,"second")],6)]),_:3},8,["class"]))}});exports.default=O;
