"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),R=require("./resize_observer.cjs"),T=require("../../hooks/use_merge_state.cjs"),X=require("../../node_modules/ksw-vue-icon/es/icons/base/grip-vertical.cjs"),Y=require("../../node_modules/ksw-vue-icon/es/icons/base/grip-horizontal.cjs"),I=require("../../node_modules/lodash-es/isString.cjs"),D=require("../../node_modules/lodash-es/isNumber.cjs"),F={class:"k-split-trigger-icon-wrapper"},H={key:1,class:"k-split-trigger-line"},j=t.defineComponent({name:"KSplit",__name:"split",props:{modelValue:{},defaultSize:{default:.5},component:{default:"div"},direction:{default:"horizontal"},min:{},max:{},disabled:{type:Boolean,default:!1},pane1Class:{default:""},pane1Style:{},pane2Class:{default:""},pane2Style:{},triggerIcon:{},showTrigger:{type:Boolean,default:!0}},emits:["moveStart","moving","moveEnd","update:modelValue"],setup(x,{emit:C}){const l=x,u=C;t.onMounted(async()=>{const e=await z(),n=w(c.value,e);S(n,e)});const a={startPageX:0,startPageY:0,startContainerSize:0,startSize:0},{direction:h,modelValue:b,defaultSize:E,min:V,max:M}=t.toRefs(l),[c,$]=T.useMergeState(E.value,t.reactive({value:b})),v=t.ref(0),d=t.ref(),f=t.computed(()=>k(c.value)),o=t.computed(()=>h.value!=="vertical"),B=t.computed(()=>{const{size:e,unit:n,isPx:i}=f.value;return{flex:`0 0 calc(${i?e:e*100}${n} - ${v.value/2}px)`}}),q=t.computed(()=>l.triggerIcon?l.triggerIcon:o.value?X.default:Y.default);async function z(){const e=()=>{var n,i;return o.value?(n=d.value)==null?void 0:n.clientWidth:((i=d.value)==null?void 0:i.clientHeight)||0};return(!d.value||e())&&await t.nextTick(),e()}function S(e,n){if(!n)return;const i=f.value.isPx?`${e}px`:L(e,n);i!==c.value&&($(i),u("update:modelValue",i))}function w(e,n){const i=g({size:e,containerSize:n}),r=g({size:V.value,defaultSize:"0px",containerSize:n}),m=g({size:M.value,defaultSize:`${n}px`,containerSize:n});let s=i;return s=Math.max(s,r),s=Math.min(s,m),s}function L(e,n){return parseFloat(e)/parseFloat(n)}function k(e){const n=I.default(e)?parseFloat(e):e;let i="";return D.default(e)||String(n)===e?i=n>1?"px":"%":i="px",{size:n,unit:i,isPx:i==="px"}}async function N(e){l.disabled||(u("moveStart",e),a.startPageX=e.pageX,a.startPageY=e.pageY,a.startContainerSize=await z(),a.startSize=c.value,window.addEventListener("mousemove",y),window.addEventListener("mouseup",p),window.addEventListener("contextmenu",p),document.body.style.cursor=o.value?"col-resize":"row-resize",e.preventDefault())}function y(e){u("moving",e);const n=o.value?P({startContainerSize:a.startContainerSize,startSize:a.startSize,startPosition:a.startPageX,endPosition:e.pageX}):P({startContainerSize:a.startContainerSize,startSize:a.startSize,startPosition:a.startPageY,endPosition:e.pageY});S(n,a.startContainerSize)}function p(e){window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",p),window.removeEventListener("contextmenu",p),document.body.style.cursor="default",u("moveEnd",e)}function _(e){const{width:n,height:i}=e.contentRect;v.value=o.value?n:i}function P({startContainerSize:e,startSize:n,startPosition:i,endPosition:r}){const m=g({size:n,containerSize:e});return w(`${m+(r-i)}px`,e)}function g({size:e,defaultSize:n,containerSize:i}){const r=k(e??n??.5);return r.isPx?r.size:r.size*i}return(e,n)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.component),{ref_key:"splitRef",ref:d,class:t.normalizeClass(["k-split",{"k-split-horizontal":o.value,"k-split-vertical":!o.value}])},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(["k-split-pane","k-split-pane-first",e.pane1Class]),style:t.normalizeStyle({...B.value,...e.pane1Style})},[t.renderSlot(e.$slots,"first")],6),t.createVNode(t.unref(R.default),{onMousedown:N,onResize:_},{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(["k-split-trigger",{"k-split-trigger-horizontal":o.value,"k-split-trigger-vertical":!o.value,"k-split-trigger-disabled":e.disabled}])},[e.showTrigger?t.renderSlot(e.$slots,"trigger",{key:0},()=>[t.createElementVNode("div",F,[t.renderSlot(e.$slots,"trigger-icon",{},()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(q.value),{class:"k-split-trigger-icon"}))])])]):(t.openBlock(),t.createElementBlock("div",H))],2)]),_:3}),t.createElementVNode("div",{class:t.normalizeClass(["k-split-pane","k-split-pane-second",e.pane2Class]),style:t.normalizeStyle(e.pane2Style)},[t.renderSlot(e.$slots,"second")],6)]),_:3},8,["class"]))}});exports.default=j;
