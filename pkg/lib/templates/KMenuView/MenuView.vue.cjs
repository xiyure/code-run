"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});require("../../node_modules/vue/dist/vue.runtime.esm-bundler.cjs");const v=require("../../node_modules/overlayscrollbars-vue/overlayscrollbars-vue.cjs"),g=require("./subMenu.vue.cjs"),V=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const q=require("../../node_modules/element-plus/es/components/menu/index.cjs"),x=require("../../node_modules/ksw-vue-icon/es/icons/base/left-menu-display.cjs"),e=require("../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.cjs"),r=require("../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.cjs"),i=require("../../node_modules/@vue/runtime-core/node_modules/@vue/shared/dist/shared.esm-bundler.cjs"),B={class:"k-layout-container h-screen flex overflow-hidden"},N={class:"k-layout-content h-screen overflow-hidden flex flex-col flex-1"},E={class:"k-layout-header bg-white h-12 px-4 flex w-full justify-between items-center border-b"},M={class:"k-layout-main"},$={class:"k-layout-footer"},z=e.defineComponent({name:"KMenuView",__name:"MenuView",props:{options:{default:()=>[]},defaultActive:{},showCollapse:{type:Boolean,default:!0},collapse:{type:Boolean,default:void 0},link:{type:Boolean,default:!1}},emits:["click","select"],setup(m,{expose:h,emit:k}){const t=m,p=k,s=r.ref(!1),c=r.ref(new Set([])),u=[],d=e.computed(()=>t.collapse!==void 0?t.collapse:s.value);e.watch(()=>t.options,()=>{const l=V.transformTreeData(t.options,{parentField:"index",children:"children",addPid:!0,deleteChildren:!0});u.length=0,u.push(...l)},{immediate:!0,deep:!0});const _=l=>{p("click",l)},y=()=>{t.collapse===void 0&&(s.value=!0)},C=()=>{t.collapse===void 0&&(s.value=!1)},w=()=>{t.collapse===void 0&&(s.value=!s.value)},S=l=>{f(l),p("select",l)};function f(l){if(!l)return;c.value.clear();const n=new Map(u.map(o=>[o.index,o]));let a=l;for(;a;){const o=n.get(a);o&&(c.value.add(o.index),a=o.pid)}}return f(t.defaultActive),e.provide("__activeSet__",c),h({collapse:y,expand:C,toggleExpand:w}),(l,n)=>(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("div",{class:i.normalizeClass(["k-layout-aside flex flex-col",{"is-collapse":d.value}])},[l.$slots["app-logo"]?(e.openBlock(),e.createElementBlock("div",{key:0,class:i.normalizeClass(["logo-box h-12 flex justify-start items-center p-4",{"is-collapse":d.value}])},[e.renderSlot(l.$slots,"app-logo")],2)):e.createCommentVNode("",!0),e.createVNode(r.unref(v.OverlayScrollbarsComponent),{defer:"",class:"OverlayScrollbarsComponent flex-1",options:{scrollbars:{autoHide:"scroll",theme:"os-theme-light"}}},{default:e.withCtx(()=>[e.createVNode(r.unref(q.ElMenu),e.mergeProps({collapse:d.value,"default-active":l.defaultActive},l.$attrs,{onSelect:S}),{default:e.withCtx(()=>[e.createVNode(g.default,{options:l.options,link:l.link,onClick:_},e.createSlots({_:2},[e.renderList(l.$slots,(a,o)=>({name:o,fn:e.withCtx(b=>[e.renderSlot(l.$slots,o,i.normalizeProps(e.guardReactiveProps(b)))])}))]),1032,["options","link"])]),_:3},16,["collapse","default-active"])]),_:3})],2),e.createElementVNode("div",N,[e.createElementVNode("div",E,[t.showCollapse&&t.collapse===void 0?(e.openBlock(),e.createBlock(r.unref(x.default),{key:0,class:i.normalizeClass([{"rotate-180":!s.value},"collapse-btn cursor-pointer"]),color:"black",size:"20",onClick:n[0]||(n[0]=a=>s.value=!s.value)},null,8,["class"])):e.createCommentVNode("",!0),e.renderSlot(l.$slots,"header")]),e.createVNode(r.unref(v.OverlayScrollbarsComponent),{defer:"",options:{scrollbars:{autoHide:"scroll"}},class:"flex-1"},{default:e.withCtx(()=>[e.createElementVNode("div",M,[e.renderSlot(l.$slots,"main")]),e.createElementVNode("div",$,[e.renderSlot(l.$slots,"footer")])]),_:3})])]))}});exports.default=z;
