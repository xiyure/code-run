"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),p=require("../../node_modules/overlayscrollbars-vue/overlayscrollbars-vue.cjs"),S=require("./subMenu.vue.cjs"),b=require("../../utils/utils.cjs");require("../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.cjs");require("../../node_modules/sortablejs/modular/sortable.esm.cjs");require("../../node_modules/culori/src/index.cjs");const g=require("../../node_modules/element-plus/es/components/menu/index.cjs"),V=require("../../node_modules/ksw-vue-icon/es/icons/base/left-menu-display.cjs"),x={class:"k-layout-container h-screen flex overflow-hidden"},N={class:"k-layout-content h-screen overflow-hidden flex flex-col flex-1"},q={class:"k-layout-header bg-white h-12 px-4 flex w-full justify-between items-center border-b"},B={class:"k-layout-main"},E={class:"k-layout-footer"},M=e.defineComponent({name:"KMenuView",__name:"MenuView",props:{options:{default:()=>[]},defaultActive:{},showCollapse:{type:Boolean,default:!0},collapse:{type:Boolean,default:void 0},link:{type:Boolean,default:!1}},emits:["click","select"],setup(f,{expose:v,emit:m}){const t=f,u=m,s=e.ref(!1),n=e.ref(new Set([])),i=[],c=e.computed(()=>t.collapse!==void 0?t.collapse:s.value);e.watch(()=>t.options,()=>{const l=b.transformTreeData(t.options,{parentField:"index",children:"children",addPid:!0,deleteChildren:!0});i.length=0,i.push(...l)},{immediate:!0,deep:!0});const h=l=>{u("click",l)},k=()=>{t.collapse===void 0&&(s.value=!0)},y=()=>{t.collapse===void 0&&(s.value=!1)},C=()=>{t.collapse===void 0&&(s.value=!s.value)},_=l=>{d(l),u("select",l)};function d(l){if(!l)return;n.value.clear();const a=new Map(i.map(o=>[o.index,o]));let r=l;for(;r;){const o=a.get(r);o&&(n.value.add(o.index),r=o.pid)}}return d(t.defaultActive),e.provide("__activeSet__",n),v({collapse:k,expand:y,toggleExpand:C}),(l,a)=>(e.openBlock(),e.createElementBlock("div",x,[e.createElementVNode("div",{class:e.normalizeClass(["k-layout-aside flex flex-col",{"is-collapse":c.value}])},[l.$slots["app-logo"]?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["logo-box h-12 flex justify-start items-center p-4",{"is-collapse":c.value}])},[e.renderSlot(l.$slots,"app-logo")],2)):e.createCommentVNode("",!0),e.createVNode(e.unref(p.OverlayScrollbarsComponent),{defer:"",class:"OverlayScrollbarsComponent flex-1",options:{scrollbars:{autoHide:"scroll",theme:"os-theme-light"}}},{default:e.withCtx(()=>[e.createVNode(e.unref(g.ElMenu),e.mergeProps({collapse:c.value,"default-active":l.defaultActive},l.$attrs,{onSelect:_}),{default:e.withCtx(()=>[e.createVNode(S.default,{options:l.options,link:l.link,onClick:h},e.createSlots({_:2},[e.renderList(l.$slots,(r,o)=>({name:o,fn:e.withCtx(w=>[e.renderSlot(l.$slots,o,e.normalizeProps(e.guardReactiveProps(w)))])}))]),1032,["options","link"])]),_:3},16,["collapse","default-active"])]),_:3})],2),e.createElementVNode("div",N,[e.createElementVNode("div",q,[t.showCollapse&&t.collapse===void 0?(e.openBlock(),e.createBlock(e.unref(V.default),{key:0,class:e.normalizeClass([{"rotate-180":!s.value},"collapse-btn cursor-pointer"]),color:"black",size:"20",onClick:a[0]||(a[0]=r=>s.value=!s.value)},null,8,["class"])):e.createCommentVNode("",!0),e.renderSlot(l.$slots,"header")]),e.createVNode(e.unref(p.OverlayScrollbarsComponent),{defer:"",options:{scrollbars:{autoHide:"scroll"}},class:"flex-1"},{default:e.withCtx(()=>[e.createElementVNode("div",B,[e.renderSlot(l.$slots,"main")]),e.createElementVNode("div",E,[e.renderSlot(l.$slots,"footer")])]),_:3})])]))}});exports.default=M;
